!function(e){var n={};function t(s){if(n[s])return n[s].exports;var i=n[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,s){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:s})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(s,i,function(n){return e[n]}.bind(null,i));return s},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=3)}([function(e,n,t){"use strict";t.d(n,"b",function(){return i}),t.d(n,"a",function(){return a});const s="https://translate.google.cn/translate_a/single?client=gtx";function i(e,n){chrome.storage.sync.get("languageSetting",function(t){var i=t.languageSetting,a=s+"&sl="+i.sl+"&tl="+i.tl;chrome.storage.sync.get("DTSetting",function(t){var s=a,i=t.DTSetting,o=new XMLHttpRequest;i.forEach(e=>{s=s+"&dt="+e}),o.open("GET",s+"&q="+e,!0),o.send(),o.onreadystatechange=function(){4===o.readyState&&200===o.status?n(function(e){for(var n=new Object,t=0;t<e.length;t++)if(e[t]){var s=e[t];switch(t){case 0:var i=[],a=[];s.forEach(e=>{i.push(e[0]),a.push(e[1])}),n.mainMeaning=i.join(""),n.originalText=a.join("");break;case 1:n.detailedMeanings=new Array,s.forEach(e=>n.detailedMeanings.push({type:e[0],meaning:e[1].join(", ")}));break;case 5:if(s.length<=1){let e=new Array;s[0][2].forEach(n=>e.push(n[0])),n.commonMeanings=e.join(", ")}break;case 11:n.synonyms=new Array,s.forEach(e=>{let t=new Object;t.type=e[0],t.words=new Array,e[1].forEach(e=>t.words.push(e[0].join(", "))),n.synonyms.push(t)});break;case 12:n.definitions=new Array,s.forEach(e=>{let t=new Object;t.type=e[0],t.meanings=new Array,e[1].forEach(e=>t.meanings.push({meaning:e[0],example:e[2]})),n.definitions.push(t)});break;case 13:n.examples=new Array,s.forEach(e=>e.forEach(e=>n.examples.push(e[0])));break;case 14:n.phrases=s[0]}}return n}(JSON.parse(o.response))):200!==o.status&&alert("无法请求翻译，请检查网络连接")}})})}function a(e,n){chrome.tabs.query({active:!0,currentWindow:!0},function(t){chrome.runtime.lastError?alert(e.mainMeaning):chrome.tabs.executeScript(t[0].id,{file:"./display/display.js"},function(s){chrome.runtime.lastError?chrome.extension.isAllowedFileSchemeAccess(function(n){if(n)alert(e.mainMeaning);else if(confirm(chrome.i18n.getMessage("PermissionRemind"))){let e="chrome://extensions/?id="+chrome.runtime.id;chrome.tabs.create({url:e,index:t[0].index})}else alert(e.mainMeaning)}):e&&(chrome.tabs.sendMessage(t[0].id,e),n&&n())})})}},function(e,n,t){"use strict";t.r(n);var s='<i class="translate-icon translate-icon-tuding-fix translate-fix" title="固定侧边栏"></i><i class="translate-icon translate-icon-tuding-full translate-fix" title="解除固定"></i><i class="translate-icon translate-icon-close"></i><div class="translate-main-meaning"><% if (this.mainMeaning.length <= 6) { %><p class="translate-main-meaning-content-larger"><% this.mainMeaning %></p><% } %><% else if (this.mainMeaning.length > 6 && this.mainMeaning.length <= 12) { %><p class="translate-main-meaning-content-large"><% this.mainMeaning %></p><% } %><% else if (this.mainMeaning.length > 12 && this.mainMeaning.length <= 460) { %><p class="translate-main-meaning-content-small"><% this.mainMeaning %></p><% } %><% else { %><p class="translate-main-meaning-content-smaller"><% this.mainMeaning %></p><% } %></div><div class="translate-common-meanings"><% if (this.commonMeanings && this.commonMeanings.length > 0) { %><p class="translate-content-title"><% chrome.i18n.getMessage("CommonMeanings") %>: </p><ul class="translate-list"><li class="translate-common-meanings-content"><% this.commonMeanings %></li></ul><% } %></div><div class="translate-detailed-meanings"><% if (this.detailedMeanings && this.detailedMeanings.length > 0) { %><p class="translate-content-title"><% chrome.i18n.getMessage("DetailedMeanings") %>: </p><% for (let i in this.detailedMeanings) { %><p class="translate-detailed-meanings-content"><span class="translate-word-type"><% this.detailedMeanings[i].type + ": " %></span><span class="translate-content"><% this.detailedMeanings[i].meaning %></span></p><% } %><% } %></div><div class="translate-definitions"><% if (this.definitions && this.definitions.length > 0) { %><p class="translate-content-title"><% chrome.i18n.getMessage("Definitions") %>: </p><% for (let i in this.definitions) { %><div class="translate-definitions-content"><p class="translate-word-type"><% this.definitions[i].type + ": " %></p><ul class="translate-list"><% for (let j in this.definitions[i].meanings) { %><li><span class="translate-word-type"><% chrome.i18n.getMessage("DefinitionsMeaning") %>: </span><span class="translate-content"><% this.definitions[i].meanings[j].meaning %></span><span class="translate-word-type"><% chrome.i18n.getMessage("DefinitionsExample") %>: </span><span class="translate-content"><% this.definitions[i].meanings[j].example %></span></li><% } %></ul></div><% } %><% } %></div><div class="translate-synonyms"><% if (this.synonyms && this.synonyms.length > 0) { %><p class="translate-content-title"><% chrome.i18n.getMessage("Synonyms") %>: </p><% for (let i in this.synonyms) { %><p class="translate-synonyms-content"><span class="translate-word-type"><% this.synonyms[i].type + ": " %></span><span class="translate-synonyms-words"><% this.synonyms[i].words[0] %></span></p><% } %><% } %></div><div class="translate-phrases"><% if (this.phrases && this.phrases.length > 0) { %><p class="translate-content-title"><% chrome.i18n.getMessage("Phrases") %>: </p><ul class="translate-list"><% for (let i in this.phrases) { %><li class="translate-content"><% this.phrases[i] %></li><% } %></ul><% } %></div><div class="translate-examples"><% if (this.examples && this.examples.length > 0) { %><p class="translate-content-title"><% chrome.i18n.getMessage("Examples") %>: </p><p><% for (let i in this.examples) { %><p class="translate-sentences"><% this.examples[i] %></p><% } %></p><% } %></div>',i=function(e,n){const t=/<%\s*(.*?)\s*%>/g,s=/(if|while|for)\s*\(.+\)\s*\{|else(\s+if\s*\(.+\))?\s*\{|}/;var i,a=0,o=["var result = new Array();"];for(;i=t.exec(e);){i.index>a&&o.push("result.push('"+e.substring(a,i.index)+"');");var l=i[1];s.test(l)?o.push(l):o.push("result.push("+l+");"),a=i.index+i[0].length}a<e.length-1&&o.push("result.push('"+e.substring(a,e.length)+"');");return o.push("return result.join('');"),new Function(o.join("").replace(/\n|\r/g,"")).apply(n)};n.default=c;var a,o,l,r=!1;function c(e){!function(e){d(a,document.documentElement)?(a.style.transition="none",a.style.right="-"+a.clientWidth+"px",setTimeout(function(){a.style.transition="right 300ms",a.style.right="0"},50)):((a=document.createElement("DIV")).id="translate_frame",document.body.style.transition="width 500ms",document.body.style.width="85%",document.documentElement.appendChild(a));a.innerHTML=i(s,e),document.getElementsByClassName("translate-icon-close")[0].onclick=u,document.documentElement.addEventListener("mousedown",m),a.addEventListener("mousedown",f),a.addEventListener("mousemove",h),document.addEventListener("mousemove",g),document.addEventListener("mouseup",p),document.getElementsByClassName("translate-icon-tuding-fix")[0].addEventListener("click",y),document.getElementsByClassName("translate-icon-tuding-full")[0].addEventListener("click",A)}(e),chrome.runtime.onMessage.removeListener(c)}function d(e,n){if(!e||!n)return!1;for(;e&&!e.isSameNode(document.body);){if(e.isSameNode(n))return!0;e=e.parentNode}return!1}function m(e){d(e.target,a)||u()}function u(){d(a,document.documentElement)&&(document.documentElement.removeChild(a),document.body.style.width="100%",document.documentElement.removeEventListener("mousedown",m),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",p))}function g(e){r&&(a.style.width=o-e.x+l+"px",document.body.style.width=window.innerWidth-l-(o-e.x)+"px")}function p(){r&&(a.style.transition="width 500ms",document.body.style.transition="width 500ms",r=!1)}function f(e){var n=e.target;n.isSameNode(a)&&e.x<=n.offsetLeft+4&&(r=!0,a.style.transition="none",document.body.style.transition="none",o=n.offsetLeft,l=n.clientWidth)}function h(e){var n=e.target;n.isSameNode(a)&&(e.x<=n.offsetLeft+4?a.style.cursor="e-resize":a.style.cursor="auto")}function y(){document.getElementsByClassName("translate-icon-tuding-full")[0].style.display="inline",document.getElementsByClassName("translate-icon-tuding-fix")[0].style.display="none",document.documentElement.removeEventListener("mousedown",m)}function A(){document.getElementsByClassName("translate-icon-tuding-full")[0].style.display="none",document.getElementsByClassName("translate-icon-tuding-fix")[0].style.display="inline",document.documentElement.addEventListener("mousedown",m)}chrome.runtime.onMessage.addListener(c)},,function(e,n,t){"use strict";t.r(n);var s=t(0),i=t(1);chrome.storage.sync.get("OtherSettings",function(e){var n=e.OtherSettings;n&&n.SelectTranslate&&(document.addEventListener("mouseup",r),document.addEventListener("mousedown",c))}),chrome.storage.onChanged.addListener(function(e,n){"sync"===n&&e.OtherSettings&&(e.OtherSettings.newValue.SelectTranslate?(document.addEventListener("mouseup",r),document.addEventListener("mousedown",c)):(document.removeEventListener("mouseup",r),document.removeEventListener("mousedown",c)))});var a=document.createElement("div"),o=!0,l=document.createElement("img");function r(){if(o){var e=window.getSelection();setTimeout(function(){if(e.toString().trim()){var n=e.getRangeAt(0).getBoundingClientRect();a.style.top=n.height+document.documentElement.scrollTop+n.top+3+"px",a.style.left=n.width/2+document.documentElement.scrollLeft+n.left-10+"px",a.style.display="inline-block"}else a.style.display="none"},300)}}function c(){var e=window.getSelection();setTimeout(function(){e.toString().trim()||(a.style.display="none",o=!0)},100),setTimeout(function(){e.toString().trim()||(a.style.display="none",o=!0)},400)}l.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABqlBMVEUAAABQksElnfxHgsVYm9NMlvE0QnEzRKcxRa8wQ68uQaoqPKQqOo8rPZFGXttLeP4aM1Zgs/tZp+QMDypOmM5Hi/gyd9Y5ZahJm/oaLEoSEzQTIHgUIXsUH1kRFBQPGS1ChuY2e9k/aJgKQ7xOpv83fN5etv8xSXFIcIk3nf8vXIsweugyffMYHDVcgv9EYMk2WnxZof8xcOE7ddgUU+Jhsv8wWIwtptI2d+gpaMEqbdE2WIkzdOY8gtknSIk8YMJCZspDZ8c/Y75DaLc2WJs7d9Q3V5kHAAAzX9ExW4oujudLgN85eN49f+g5eeQ4eeM3d+A5euI8hegrW7o2a9A+Z6gGBx0radAuWYFco/8nRHFmwv9Xtv9TqP9DhvdHjPpeq/9muP9ktvpjtvlhtPtfsfxgsf9gr/hzwf9Rr/9EjftNkvpOmf9OnP9Om/9QnP9QlftDivtFkv9ft/9XpP9w0f9Wnf9ftP9vyP9pv/9osv9w0v9irf9MnP9cuv9lt/9Mlv9XqP9Qn/9PoP9QoP9Onf9dt/9Cg/U/kP9u1v9OoP9hvf9qzP8AAADAaXBVAAAAW3RSTlMAbyaqrvQmICEiIiIiIiIQG+eDFsf9iJH4GRIVFRUVFLF+iwS7eFpjUiNZkWNMAhGSn0X1AbCAEEzlnWlM8oiGiIeGhoPJjhFaUSmIiYiIiIeHhoLHcASnWp5xRWw5awAAAAFiS0dEAIgFHUgAAAAJcEhZcwASBa4AEgWuAWmKs1MAAADGSURBVBjTY2AAAkYmBhTAHI3KZ4lhZWPn4OTi5uHl42dgEBCMjYtPSExKTklNS88QYmAQFsnMEs3Oyc3Lyy8oLBIDaREvlpCUkpaRlZNXKFEEG6JUqgwxTaVMFUiqqTNoaEIEtMq1gaROhS6Eq6fPYGAIpI0qjSECJqZmDOZA2qLKEuogq2prEGVTY2tn7+Do5OziWlvn5s7A4FHf0NjU3NLc2tbS3tHpycDg5e3j6+cfEBgUHNLVHRqG7KnwnghUX0ZGAQkARdEoBO6NYQwAAAAASUVORK5CYII=",a.appendChild(l),a.id="translate-button",document.documentElement.appendChild(a),a.addEventListener("mousedown",function(){o=!1,Object(s.b)(window.getSelection().toString(),function(e){a.style.display="none",Object(i.default)(e)})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyYW5zbGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlzcGxheS90ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlzcGxheS9lbmdpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Rpc3BsYXkvZGlzcGxheS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2VsZWN0LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQkFTRV9VUkwiLCJ0cmFuc2xhdGUiLCJ0ZXh0IiwiY2FsbGJhY2siLCJjaHJvbWUiLCJzdG9yYWdlIiwic3luYyIsInJlc3VsdCIsImxhbmd1YWdlU2V0dGluZyIsInRtcFVybCIsInNsIiwidGwiLCJ1cmwiLCJEVFNldHRpbmciLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJmb3JFYWNoIiwiZWxlbWVudCIsIm9wZW4iLCJzZW5kIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInJlc3BvbnNlIiwibGVuZ3RoIiwiaXRlbXMiLCJtYWluTWVhbmluZ3MiLCJvcmlnaW5hbFRleHRzIiwiaXRlbSIsInB1c2giLCJtYWluTWVhbmluZyIsImpvaW4iLCJvcmlnaW5hbFRleHQiLCJkZXRhaWxlZE1lYW5pbmdzIiwiQXJyYXkiLCJ0eXBlIiwibWVhbmluZyIsIm1lYW5pbmdBcnJheSIsImNvbW1vbk1lYW5pbmdzIiwic3lub255bXMiLCJ3b3JkcyIsImRlZmluaXRpb25zIiwiZGVmaW5pdGlvbiIsIm1lYW5pbmdzIiwiZXhhbXBsZSIsImV4YW1wbGVzIiwicGhyYXNlcyIsInBhcnNlVHJhbnNsYXRlIiwiSlNPTiIsInBhcnNlIiwiYWxlcnQiLCJzaG93VHJhbnNsYXRlIiwiY29udGVudCIsInRhYnMiLCJxdWVyeSIsImFjdGl2ZSIsImN1cnJlbnRXaW5kb3ciLCJydW50aW1lIiwibGFzdEVycm9yIiwiZXhlY3V0ZVNjcmlwdCIsImlkIiwiZmlsZSIsInRhYiIsImV4dGVuc2lvbiIsImlzQWxsb3dlZEZpbGVTY2hlbWVBY2Nlc3MiLCJpc0FsbG93ZWRBY2Nlc3MiLCJjb25maXJtIiwiaTE4biIsImdldE1lc3NhZ2UiLCJpbmRleCIsInNlbmRNZXNzYWdlIiwidGVtcGxhdGUiLCJlbmdpbmUiLCJjb250ZW50cyIsIkNPTlRFTlRfUkVHRVgiLCJFWFBSRVNTSU9OX1JFR0VYIiwibWF0Y2giLCJsYXN0SW5kZXgiLCJjb2RlIiwiZXhlYyIsInN1YnN0cmluZyIsImV4cHJlc3Npb24iLCJ0ZXN0IiwiRnVuY3Rpb24iLCJyZXBsYWNlIiwiYXBwbHkiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiZGlzcGxheV9mcmFtZSIsIm9yaWdpblgiLCJvcmlnaW5XaWR0aCIsIm1vdXNlZG93biIsImRpc3BsYXlfZGlzcGxheSIsImlzQ2hpbGROb2RlIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzdHlsZSIsInRyYW5zaXRpb24iLCJyaWdodCIsImNsaWVudFdpZHRoIiwic2V0VGltZW91dCIsImNyZWF0ZUVsZW1lbnQiLCJib2R5Iiwid2lkdGgiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJvbmNsaWNrIiwicmVtb3ZlU2xpZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsaWNrTGlzdGVuZXIiLCJkcmFnSGFuZGxlciIsIm1vdmVIYW5kbGVyIiwiZHJhZ09uIiwiZHJhZ09mZiIsImZpeE9uIiwiZml4T2ZmIiwiY3JlYXRlQmxvY2siLCJvbk1lc3NhZ2UiLCJyZW1vdmVMaXN0ZW5lciIsIm5vZGUxIiwibm9kZTIiLCJpc1NhbWVOb2RlIiwicGFyZW50Tm9kZSIsImV2ZW50IiwidGFyZ2V0IiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwieCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJub2RlIiwib2Zmc2V0TGVmdCIsImN1cnNvciIsImRpc3BsYXkiLCJhZGRMaXN0ZW5lciIsIk90aGVyU2V0dGluZ3MiLCJzaG93QnV0dG9uIiwiZGlzcGVhckJ1dHRvbiIsIm9uQ2hhbmdlZCIsImNoYW5nZXMiLCJhcmVhIiwibmV3VmFsdWUiLCJ0cmFuc2xhdGVCdXR0b24iLCJkaXNhYmxlIiwiaW1nIiwic2VsZWN0aW9uIiwiZ2V0U2VsZWN0aW9uIiwidG9TdHJpbmciLCJ0cmltIiwiZ2V0UmFuZ2VBdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImhlaWdodCIsInNjcm9sbFRvcCIsImxlZnQiLCJzY3JvbGxMZWZ0Iiwic3JjIiwiX3RyYW5zbGF0ZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX2Rpc3BsYXlfZGlzcGxheV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVB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QW1MLEVBQUEsRUFBQW5MLENBQUFzSixPQUFBa0IsZUFBQUMsV0FBQSxTQUFBNUksR0FDQXVJLEVBQUEvQyxNQUFBc0MsUUFBQSxPQUNBM0osT0FBQW9MLEVBQUEsUUFBQXBMLENBQUE2QiIsImZpbGUiOiJzZWxlY3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4iLCJleHBvcnQgeyB0cmFuc2xhdGUsIHNob3dUcmFuc2xhdGUgfTtcclxuLyoqXHJcbiAqIOe/u+ivkeaOpeWPo+OAglxyXG4gKi9cclxuY29uc3QgQkFTRV9VUkwgPSBcImh0dHBzOi8vdHJhbnNsYXRlLmdvb2dsZS5jbi90cmFuc2xhdGVfYS9zaW5nbGU/Y2xpZW50PWd0eFwiO1xyXG5cclxuLyoqXHJcbiAqIFxyXG4gKiDmraTlh73mlbDotJ/otKPlsIbkvKDlhaXnmoTmlofmnKznv7vor5HvvIzlubblnKjlvZPliY3pobXpnaLnmoTkvqfovrnmoI/kuK3lsZXnpLpcclxuICogXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IOmcgOimgee/u+ivkeeahOaWh+acrOWtl+espuS4slxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayDlrozmiJDnv7vor5HlkI7nlKjku6Xojrflj5bnv7vor5Hnu5PmnpxcclxuICovXHJcbmZ1bmN0aW9uIHRyYW5zbGF0ZSh0ZXh0LCBjYWxsYmFjaykge1xyXG5cclxuICAgIC8vIOiOt+WPlue/u+ivkeivreiogOiuvuWumuOAglxyXG4gICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoXCJsYW5ndWFnZVNldHRpbmdcIiwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIHZhciBsYW5ndWFnZVNldHRpbmcgPSByZXN1bHQubGFuZ3VhZ2VTZXR0aW5nO1xyXG4gICAgICAgIHZhciB0bXBVcmwgPSBCQVNFX1VSTCArIFwiJnNsPVwiICsgbGFuZ3VhZ2VTZXR0aW5nLnNsICsgXCImdGw9XCIgKyBsYW5ndWFnZVNldHRpbmcudGw7XHJcblxyXG4gICAgICAgIC8vIOiOt+WPlue/u+ivkeWPguaVsOiuvuWumuOAglxyXG4gICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KFwiRFRTZXR0aW5nXCIsIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgdmFyIHVybCA9IHRtcFVybDtcclxuICAgICAgICAgICAgdmFyIERUU2V0dGluZyA9IHJlc3VsdC5EVFNldHRpbmc7XHJcbiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgICAgICAgICBEVFNldHRpbmcuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIHVybCA9IHVybCArIFwiJmR0PVwiICsgZWxlbWVudDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgdXJsICsgXCImcT1cIiArIHRleHQsIHRydWUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0LnNlbmQoKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09PSA0ICYmIHJlcXVlc3Quc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhwYXJzZVRyYW5zbGF0ZShKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2UpKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXF1ZXN0LnN0YXR1cyAhPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+aXoOazleivt+axgue/u+ivke+8jOivt+ajgOafpee9kee7nOi/nuaOpScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiA8cD7op6PmnpDosLfmrYznv7vor5Hov5Tlm57nmoTnu5PmnpzjgILop6PmnpDnu5Pmnpznu5PmnoTlpoLkuIvvvJo8L3A+XHJcbiAqIFxyXG4gKiA8cHJlPlxyXG4gKiAgICAgcmVzdWx0ID0ge1xyXG4gKiAgICAgICAgIFwibWFpbk1lYW5pbmdcIjogPOWtl+espuS4su+8jOWNleivjeeahOS4u+imgeaEj+aAne+8jOWPpeWtkOeahOacgOWPr+iDveeahOaEj+aAnT4sXHJcbiAqICAgICAgICAgXCJvcmlnaW5hbFRleHRcIjogPOWtl+espuS4su+8jOiiq+e/u+ivkeeahOWNleivjeaIluWPpeWtkD4sXHJcbiAqICAgICAgICAgXCJkZXRhaWxlZE1lYW5pbmdzXCI6IFtcclxuICogICAgICAgICAgICAge1xyXG4gKiAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IDzlrZfnrKbkuLLvvIzljZXor43nmoTor43mgKc+LFxyXG4gKiAgICAgICAgICAgICAgICAgXCJtZWFuaW5nXCI6IDzlrZfnrKbkuLLvvIzljZXor43lnKjor6Xor43mgKfkuIvnmoTmiYDmnInmhI/mgJ0+XHJcbiAqICAgICAgICAgICAgIH1cclxuICogICAgICAgICBdLFxyXG4gKiAgICAgICAgIFwiY29tbW9uTWVhbmluZ3NcIjogPOWtl+espuS4su+8jOWNleivjeeahOW4uOingeaEj+aAne+8jOWPpeWtkOeahOaJgOacieWPr+iDveaEj+aAnT4sXHJcbiAqICAgICAgICAgXCJzeW5vbnltc1wiOiBbXHJcbiAqICAgICAgICAgICAgIHtcclxuICogICAgICAgICAgICAgICAgIFwidHlwZVwiOiA85a2X56ym5Liy77yM5Y2V6K+N55qE6K+N5oCnPixcclxuICogICAgICAgICAgICAgICAgIFwid29yZHNcIjogW1xyXG4gKiAgICAgICAgICAgICAgICAgICAgIDzlrZfnrKbkuLLvvIzljZXor43lnKjor6Xor43mgKfkuIvnmoTov5HkuYnor43vvIzmoLnmja7mhI/mgJ3liIbnu4Q+XHJcbiAqICAgICAgICAgICAgICAgICBdXHJcbiAqICAgICAgICAgICAgIH1cclxuICogICAgICAgICBdLFxyXG4gKiAgICAgICAgIFwiZGVmaW5pdGlvbnNcIjogW1xyXG4gKiAgICAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICAgICBcInR5cGVcIjogPOWtl+espuS4su+8jOWNleivjeeahOivjeaApz4sXHJcbiAqICAgICAgICAgICAgICAgICBcIm1lYW5pbmdzXCI6IFtcclxuICogICAgICAgICAgICAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIFwibWVhbmluZ1wiOiA85a2X56ym5Liy77yM5Y2V6K+N55qE5oSP5oCd77yI6Iux5paH6Kej6YeK77yJPixcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgXCJleGFtcGxlXCI6IDzlrZfnrKbkuLLvvIzkvovlj6U+XHJcbiAqICAgICAgICAgICAgICAgICAgICAgfVxyXG4gKiAgICAgICAgICAgICAgICAgXVxyXG4gKiAgICAgICAgICAgICB9XHJcbiAqICAgICAgICAgXSxcclxuICogICAgICAgICBcImV4YW1wbGVzXCI6IFtcclxuICogICAgICAgICAgICAgPOWtl+espuS4su+8jOWNleivjeeahOS+i+WPpT5cclxuICogICAgICAgICBdLFxyXG4gKiAgICAgICAgIFwicGhyYXNlc1wiOiBbXHJcbiAqICAgICAgICAgICAgIDzlrZfnrKbkuLLvvIzljZXor43mnoTmiJDnmoTnn63or60+XHJcbiAqICAgICAgICAgXVxyXG4gKiAgICAgfVxyXG4gKiA8L3ByZT5cclxuICogXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXNwb25zZSDosLfmrYznv7vor5Hov5Tlm57nmoTnu5PmnpzjgIJcclxuICogQHJldHVybnMge09iamVjdH0g5oyJ54Wnc3BlY+S4reeahOaVsOaNrue7k+aehOWtmOWCqOeahOe7k+aenFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VUcmFuc2xhdGUocmVzcG9uc2UpIHtcclxuICAgIHZhciByZXN1bHQgPSBuZXcgT2JqZWN0KCk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlW2ldKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHJlc3BvbnNlW2ldO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGkpIHtcclxuICAgICAgICAgICAgICAgIC8vIOWNleivjeeahOWfuuacrOaEj+aAnVxyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYWluTWVhbmluZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxUZXh0cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5NZWFuaW5ncy5wdXNoKGl0ZW1bMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFRleHRzLnB1c2goaXRlbVsxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm1haW5NZWFuaW5nID0gbWFpbk1lYW5pbmdzLmpvaW4oJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5vcmlnaW5hbFRleHQgPSBvcmlnaW5hbFRleHRzLmpvaW4oJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGV4dDogXCIgKyByZXN1bHQub3JpZ2luYWxUZXh0ICsgXCJcXG5tZWFuaW5nOiBcIiArIHJlc3VsdC5tYWluTWVhbmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyDljZXor43nmoTmiYDmnInor43mgKflj4rlr7nlupTnmoTmhI/mgJ1cclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZGV0YWlsZWRNZWFuaW5ncyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuZGV0YWlsZWRNZWFuaW5ncy5wdXNoKHsgXCJ0eXBlXCI6IGl0ZW1bMF0sIFwibWVhbmluZ1wiOiBpdGVtWzFdLmpvaW4oXCIsIFwiKSB9KVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJkZXRhaWxlZE1lYW5pbmdzOiBcIiArIEpTT04uc3RyaW5naWZ5KHJlc3VsdC5kZXRhaWxlZE1lYW5pbmdzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyDljZXor43miJblj6XlrZDnmoTluLjop4HmhI/mgJ3vvIjljZXor43nmoTluLjop4HmhI/mgJ3vvIzlj6XlrZDnmoTmiYDmnInlj6/og73mhI/mgJ3vvIlcclxuICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoIDw9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lYW5pbmdBcnJheSA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1swXVsyXS5mb3JFYWNoKGl0ZW0gPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lYW5pbmdBcnJheS5wdXNoKGl0ZW1bMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5jb21tb25NZWFuaW5ncyA9IG1lYW5pbmdBcnJheS5qb2luKFwiLCBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiY29tbW9uTWVhbmluZ3M6IFwiICsgcmVzdWx0LmNvbW1vbk1lYW5pbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyDljZXor43nmoTlkIzkuYnor43vvIzmoLnmja7or43mgKfliIbnu4RcclxuICAgICAgICAgICAgICAgIGNhc2UgMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN5bm9ueW1zID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBuZXcgT2JqZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudHlwZSA9IGl0ZW1bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQud29yZHMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVsxXS5mb3JFYWNoKHdvcmRzID0+IGVsZW1lbnQud29yZHMucHVzaCh3b3Jkc1swXS5qb2luKFwiLCBcIikpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN5bm9ueW1zLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJzeW5vbnltczogXCIgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQuc3lub255bXMpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIC8vIOWNleivjeeahOWumuS5ieWPiuWvueW6lOS+i+WtkFxyXG4gICAgICAgICAgICAgICAgY2FzZSAxMjpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZGVmaW5pdGlvbnMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVmaW5pdGlvbiA9IG5ldyBPYmplY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5pdGlvbi50eXBlID0gaXRlbVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5pdGlvbi5tZWFuaW5ncyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtWzFdLmZvckVhY2goZWxlbWVudCA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5pdGlvbi5tZWFuaW5ncy5wdXNoKHsgXCJtZWFuaW5nXCI6IGVsZW1lbnRbMF0sIFwiZXhhbXBsZVwiOiBlbGVtZW50WzJdIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kZWZpbml0aW9ucy5wdXNoKGRlZmluaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZGVmaW5pdGlvbnM6IFwiICsgSlNPTi5zdHJpbmdpZnkocmVzdWx0LmRlZmluaXRpb25zKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyDljZXor43nmoTkvovlj6VcclxuICAgICAgICAgICAgICAgIGNhc2UgMTM6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmV4YW1wbGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZm9yRWFjaChlbGVtZW50ID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuZXhhbXBsZXMucHVzaChlbGVtZW50WzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImV4YW1wbGVzOiBcIiArIEpTT04uc3RyaW5naWZ5KHJlc3VsdC5leGFtcGxlcykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8g5Y2V6K+N5p6E5oiQ55qE5bi46KeB55+t6K+tXHJcbiAgICAgICAgICAgICAgICBjYXNlIDE0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5waHJhc2VzID0gaXRlbXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJwaHJhc2VzOiBcIiArIEpTT04uc3RyaW5naWZ5KHJlc3VsdC5waHJhc2VzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWxleekuue/u+ivkee7k+aenOOAglxyXG4gKiBcclxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRlbnQg57+76K+R57uT5p6c44CCXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIOWxleekuuWujOmhtemdouWQjuaJp+ihjOeahOWbnuiwg+WHveaVsFxyXG4gKi9cclxuZnVuY3Rpb24gc2hvd1RyYW5zbGF0ZShjb250ZW50LCBjYWxsYmFjaykge1xyXG4gICAgY2hyb21lLnRhYnMucXVlcnkoeyBhY3RpdmU6IHRydWUsIGN1cnJlbnRXaW5kb3c6IHRydWUgfSwgZnVuY3Rpb24gKHRhYnMpIHtcclxuICAgICAgICBpZiAoY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yKVxyXG4gICAgICAgICAgICBhbGVydChjb250ZW50Lm1haW5NZWFuaW5nKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY2hyb21lLnRhYnMuZXhlY3V0ZVNjcmlwdCh0YWJzWzBdLmlkLCB7XHJcbiAgICAgICAgICAgICAgICBmaWxlOiAnLi9kaXNwbGF5L2Rpc3BsYXkuanMnXHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0YWIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaHJvbWUucnVudGltZS5sYXN0RXJyb3IpIHsgLy8gY29udGVudF9zY3JpcHTml6Dms5XlnKjlvZPliY3nqpflj6PmiafooYxcclxuICAgICAgICAgICAgICAgICAgICAvLyDov5nph4zor6Lpl67mmK/lkKblvIDlkK/kuoborr/pl64gZmlsZTovLyDnvZHlnYDnmoTmnYPpmZBcclxuICAgICAgICAgICAgICAgICAgICBjaHJvbWUuZXh0ZW5zaW9uLmlzQWxsb3dlZEZpbGVTY2hlbWVBY2Nlc3MoZnVuY3Rpb24gKGlzQWxsb3dlZEFjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBbGxvd2VkQWNjZXNzKSB7IC8vIOWmguaenOW8gOWQr+S6huadg+mZkO+8jOWImeWPquiDvemAmui/h2FsZXJ05bGV56S657uT5p6cXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChjb250ZW50Lm1haW5NZWFuaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8g5pyq5byA5ZCv5p2D6ZmQ77yM5YiZ6YCa6L+H6L+Z56eN5pa55byP5bGV56S65p2D6ZmQXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlybShjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKFwiUGVybWlzc2lvblJlbWluZFwiKSkpIHsgLy8g5omT5byA566h55CG6aG16Z2i77yM55Sx55So5oi35byA5ZCv5p2D6ZmQXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVybCA9ICdjaHJvbWU6Ly9leHRlbnNpb25zLz9pZD0nICsgY2hyb21lLnJ1bnRpbWUuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lLnRhYnMuY3JlYXRlKHsgLy8g5Li6566h55CG6aG16Z2i5Yib5bu65LiA5Liq5paw55qE5qCH562+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGFic1swXS5pbmRleFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyDnlKjmiLfmi5Lnu53lvIDlkK/vvIzliJnnm7TmjqXlsZXnpLrnv7vor5Hnu5PmnpxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChjb250ZW50Lm1haW5NZWFuaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmAmui/h+W1jOWll+a3u+WKoOWkmuS4qmNvbnRlbnQgc2NyaXB0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tZS50YWJzLnNlbmRNZXNzYWdlKHRhYnNbMF0uaWQsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIC8vIOW9k+e/u+ivkee7k+aenOWxleekuuWujOWQju+8jOaJp+ihjOatpOWbnuiwg+WHveaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG4iLCJleHBvcnQge3RlbXBsYXRlfTtcclxudmFyIHRlbXBsYXRlID0gICc8aSBjbGFzcz1cInRyYW5zbGF0ZS1pY29uIHRyYW5zbGF0ZS1pY29uLXR1ZGluZy1maXggdHJhbnNsYXRlLWZpeFwiIHRpdGxlPVwi5Zu65a6a5L6n6L655qCPXCI+PC9pPicrXHJcbiAgICAgICAgICAgICAgICAnPGkgY2xhc3M9XCJ0cmFuc2xhdGUtaWNvbiB0cmFuc2xhdGUtaWNvbi10dWRpbmctZnVsbCB0cmFuc2xhdGUtZml4XCIgdGl0bGU9XCLop6PpmaTlm7rlrppcIj48L2k+JytcclxuICAgICAgICAgICAgICAgICc8aSBjbGFzcz1cInRyYW5zbGF0ZS1pY29uIHRyYW5zbGF0ZS1pY29uLWNsb3NlXCI+PC9pPicgKyBcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidHJhbnNsYXRlLW1haW4tbWVhbmluZ1wiPicgKyBcclxuICAgICAgICAgICAgICAgICAgICc8JSBpZiAodGhpcy5tYWluTWVhbmluZy5sZW5ndGggPD0gNikgeyAlPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ0cmFuc2xhdGUtbWFpbi1tZWFuaW5nLWNvbnRlbnQtbGFyZ2VyXCI+PCUgdGhpcy5tYWluTWVhbmluZyAlPjwvcD4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAnPCUgfSAlPicgKyBcclxuICAgICAgICAgICAgICAgICAgICc8JSBlbHNlIGlmICh0aGlzLm1haW5NZWFuaW5nLmxlbmd0aCA+IDYgJiYgdGhpcy5tYWluTWVhbmluZy5sZW5ndGggPD0gMTIpIHsgJT4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwidHJhbnNsYXRlLW1haW4tbWVhbmluZy1jb250ZW50LWxhcmdlXCI+PCUgdGhpcy5tYWluTWVhbmluZyAlPjwvcD4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAnPCUgfSAlPicgKyBcclxuICAgICAgICAgICAgICAgICAgICc8JSBlbHNlIGlmICh0aGlzLm1haW5NZWFuaW5nLmxlbmd0aCA+IDEyICYmIHRoaXMubWFpbk1lYW5pbmcubGVuZ3RoIDw9IDQ2MCkgeyAlPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ0cmFuc2xhdGUtbWFpbi1tZWFuaW5nLWNvbnRlbnQtc21hbGxcIj48JSB0aGlzLm1haW5NZWFuaW5nICU+PC9wPicgKyBcclxuICAgICAgICAgICAgICAgICAgICc8JSB9ICU+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgJzwlIGVsc2UgeyAlPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ0cmFuc2xhdGUtbWFpbi1tZWFuaW5nLWNvbnRlbnQtc21hbGxlclwiPjwlIHRoaXMubWFpbk1lYW5pbmcgJT48L3A+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgJzwlIH0gJT4nICsgXHJcbiAgICAgICAgICAgICAgICc8L2Rpdj4nICsgXHJcbiAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidHJhbnNsYXRlLWNvbW1vbi1tZWFuaW5nc1wiPicgKyBcclxuICAgICAgICAgICAgICAgICAgICc8JSBpZiAodGhpcy5jb21tb25NZWFuaW5ncyAmJiB0aGlzLmNvbW1vbk1lYW5pbmdzLmxlbmd0aCA+IDApIHsgJT4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cInRyYW5zbGF0ZS1jb250ZW50LXRpdGxlXCI+PCUgY2hyb21lLmkxOG4uZ2V0TWVzc2FnZShcIkNvbW1vbk1lYW5pbmdzXCIpICU+OiA8L3A+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHVsIGNsYXNzPVwidHJhbnNsYXRlLWxpc3RcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxsaSBjbGFzcz1cInRyYW5zbGF0ZS1jb21tb24tbWVhbmluZ3MtY29udGVudFwiPjwlIHRoaXMuY29tbW9uTWVhbmluZ3MgJT48L2xpPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvdWw+JytcclxuICAgICAgICAgICAgICAgICAgICc8JSB9ICU+JyArIFxyXG4gICAgICAgICAgICAgICAnPC9kaXY+JyArIFxyXG4gICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInRyYW5zbGF0ZS1kZXRhaWxlZC1tZWFuaW5nc1wiPicgKyBcclxuICAgICAgICAgICAgICAgICAgICc8JSBpZiAodGhpcy5kZXRhaWxlZE1lYW5pbmdzICYmIHRoaXMuZGV0YWlsZWRNZWFuaW5ncy5sZW5ndGggPiAwKSB7ICU+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cInRyYW5zbGF0ZS1jb250ZW50LXRpdGxlXCI+PCUgY2hyb21lLmkxOG4uZ2V0TWVzc2FnZShcIkRldGFpbGVkTWVhbmluZ3NcIikgJT46IDwvcD4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgJzwlIGZvciAobGV0IGkgaW4gdGhpcy5kZXRhaWxlZE1lYW5pbmdzKSB7ICU+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ0cmFuc2xhdGUtZGV0YWlsZWQtbWVhbmluZ3MtY29udGVudFwiPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInRyYW5zbGF0ZS13b3JkLXR5cGVcIj48JSB0aGlzLmRldGFpbGVkTWVhbmluZ3NbaV0udHlwZSArIFwiOiBcIiAlPjwvc3Bhbj4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJ0cmFuc2xhdGUtY29udGVudFwiPjwlIHRoaXMuZGV0YWlsZWRNZWFuaW5nc1tpXS5tZWFuaW5nICU+PC9zcGFuPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvcD4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgJzwlIH0gJT4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAnPCUgfSAlPicgKyBcclxuICAgICAgICAgICAgICAgJzwvZGl2PicgKyBcclxuICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ0cmFuc2xhdGUtZGVmaW5pdGlvbnNcIj4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAnPCUgaWYgKHRoaXMuZGVmaW5pdGlvbnMgJiYgdGhpcy5kZWZpbml0aW9ucy5sZW5ndGggPiAwKSB7ICU+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cInRyYW5zbGF0ZS1jb250ZW50LXRpdGxlXCI+PCUgY2hyb21lLmkxOG4uZ2V0TWVzc2FnZShcIkRlZmluaXRpb25zXCIpICU+OiA8L3A+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICc8JSBmb3IgKGxldCBpIGluIHRoaXMuZGVmaW5pdGlvbnMpIHsgJT4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidHJhbnNsYXRlLWRlZmluaXRpb25zLWNvbnRlbnRcIj4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ0cmFuc2xhdGUtd29yZC10eXBlXCI+PCUgdGhpcy5kZWZpbml0aW9uc1tpXS50eXBlICsgXCI6IFwiICU+PC9wPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dWwgY2xhc3M9XCJ0cmFuc2xhdGUtbGlzdFwiPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPCUgZm9yIChsZXQgaiBpbiB0aGlzLmRlZmluaXRpb25zW2ldLm1lYW5pbmdzKSB7ICU+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxpPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInRyYW5zbGF0ZS13b3JkLXR5cGVcIj48JSBjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKFwiRGVmaW5pdGlvbnNNZWFuaW5nXCIpICU+OiA8L3NwYW4+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInRyYW5zbGF0ZS1jb250ZW50XCI+PCUgdGhpcy5kZWZpbml0aW9uc1tpXS5tZWFuaW5nc1tqXS5tZWFuaW5nICU+PC9zcGFuPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInRyYW5zbGF0ZS13b3JkLXR5cGVcIj48JSBjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKFwiRGVmaW5pdGlvbnNFeGFtcGxlXCIpICU+OiA8L3NwYW4+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInRyYW5zbGF0ZS1jb250ZW50XCI+PCUgdGhpcy5kZWZpbml0aW9uc1tpXS5tZWFuaW5nc1tqXS5leGFtcGxlICU+PC9zcGFuPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvbGk+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8JSB9ICU+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvdWw+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICc8JSB9ICU+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgJzwlIH0gJT4nICsgXHJcbiAgICAgICAgICAgICAgICc8L2Rpdj4nICsgXHJcbiAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidHJhbnNsYXRlLXN5bm9ueW1zXCI+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgJzwlIGlmICh0aGlzLnN5bm9ueW1zICYmIHRoaXMuc3lub255bXMubGVuZ3RoID4gMCkgeyAlPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ0cmFuc2xhdGUtY29udGVudC10aXRsZVwiPjwlIGNocm9tZS5pMThuLmdldE1lc3NhZ2UoXCJTeW5vbnltc1wiKSAlPjogPC9wPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAnPCUgZm9yIChsZXQgaSBpbiB0aGlzLnN5bm9ueW1zKSB7ICU+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ0cmFuc2xhdGUtc3lub255bXMtY29udGVudFwiPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInRyYW5zbGF0ZS13b3JkLXR5cGVcIj48JSB0aGlzLnN5bm9ueW1zW2ldLnR5cGUgKyBcIjogXCIgJT48L3NwYW4+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwidHJhbnNsYXRlLXN5bm9ueW1zLXdvcmRzXCI+PCUgdGhpcy5zeW5vbnltc1tpXS53b3Jkc1swXSAlPjwvc3Bhbj4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3A+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICc8JSB9ICU+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgJzwlIH0gJT4nICtcclxuICAgICAgICAgICAgICAgJzwvZGl2PicgKyBcclxuICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ0cmFuc2xhdGUtcGhyYXNlc1wiPicgKyBcclxuICAgICAgICAgICAgICAgICAgICc8JSBpZiAodGhpcy5waHJhc2VzICYmIHRoaXMucGhyYXNlcy5sZW5ndGggPiAwKSB7ICU+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cInRyYW5zbGF0ZS1jb250ZW50LXRpdGxlXCI+PCUgY2hyb21lLmkxOG4uZ2V0TWVzc2FnZShcIlBocmFzZXNcIikgJT46IDwvcD4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgJzx1bCBjbGFzcz1cInRyYW5zbGF0ZS1saXN0XCI+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnPCUgZm9yIChsZXQgaSBpbiB0aGlzLnBocmFzZXMpIHsgJT4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxpIGNsYXNzPVwidHJhbnNsYXRlLWNvbnRlbnRcIj48JSB0aGlzLnBocmFzZXNbaV0gJT48L2xpPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwlIH0gJT4nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgJzwvdWw+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgJzwlIH0gJT4nICsgXHJcbiAgICAgICAgICAgICAgICc8L2Rpdj4nICsgXHJcbiAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidHJhbnNsYXRlLWV4YW1wbGVzXCI+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgJzwlIGlmICh0aGlzLmV4YW1wbGVzICYmIHRoaXMuZXhhbXBsZXMubGVuZ3RoID4gMCkgeyAlPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ0cmFuc2xhdGUtY29udGVudC10aXRsZVwiPjwlIGNocm9tZS5pMThuLmdldE1lc3NhZ2UoXCJFeGFtcGxlc1wiKSAlPjogPC9wPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAnPHA+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnPCUgZm9yIChsZXQgaSBpbiB0aGlzLmV4YW1wbGVzKSB7ICU+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwidHJhbnNsYXRlLXNlbnRlbmNlc1wiPjwlIHRoaXMuZXhhbXBsZXNbaV0gJT48L3A+JyArIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnPCUgfSAlPicgKyBcclxuICAgICAgICAgICAgICAgICAgICAgICAnPC9wPicgKyBcclxuICAgICAgICAgICAgICAgICAgICc8JSB9ICU+JyArIFxyXG4gICAgICAgICAgICAgICAnPC9kaXY+JzsiLCJleHBvcnQgZGVmYXVsdCByZW5kZXI7XHJcbi8qKlxyXG4gKiDnroDmmJPnmoRIVE1M5qih5p2/5byV5pOO77yM5Zyo5pys6aG555uu5Lit55So5LqO5riy5p+T5bGV56S657+76K+R57uT5p6c55qE6aG16Z2i44CCXHJcbiAqIFxyXG4gKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGUg5b6F5riy5p+T55qESFRNTOaooeadv+OAglxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGVudHMg55So5LqO5aGr5YWF5qih5p2/55qE5pWw5o2u44CCXHJcbiAqIEByZXR1cm5zIOa4suafk+WujOaIkOeahEhUTUzmlofmnKzjgIJcclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlcih0ZW1wbGF0ZSwgY29udGVudHMpIHtcclxuICAgIC8vIOWMuemFjeaooeadv+S4reeahOW+heWhq+WFhemDqOWIhlxyXG4gICAgY29uc3QgQ09OVEVOVF9SRUdFWCA9IC88JVxccyooLio/KVxccyolPi9nO1xyXG5cclxuICAgIC8vIOWMuemFjeaooeadv+S4reeahOmAu+i+keihqOi+vuW8j1xyXG4gICAgY29uc3QgRVhQUkVTU0lPTl9SRUdFWCA9IC8oaWZ8d2hpbGV8Zm9yKVxccypcXCguK1xcKVxccypcXHt8ZWxzZShcXHMraWZcXHMqXFwoLitcXCkpP1xccypcXHt8fS87XHJcblxyXG4gICAgLy8g5LiK5qyh5Yy56YWN57uT5p2f5ZCO5Ymp5L2Z5a2Q5Liy5ZyodGVtcGxhdGXkuK3nmoTotbflp4vkvY3nva5cclxuICAgIHZhciBsYXN0SW5kZXggPSAwO1xyXG4gICAgdmFyIGNvZGUgPSBbXCJ2YXIgcmVzdWx0ID0gbmV3IEFycmF5KCk7XCJdO1xyXG4gICAgdmFyIG1hdGNoO1xyXG5cclxuICAgIC8vIOS+neasoeWMuemFjeaJgOacieW+heWhq+WFhemhuVxyXG4gICAgd2hpbGUgKG1hdGNoID0gQ09OVEVOVF9SRUdFWC5leGVjKHRlbXBsYXRlKSkge1xyXG4gICAgICAgIC8vIOS7juW9k+WJjeWJqeS9meWtkOS4sueahOi1t+Wni+S9jee9ruWIsOacrOasoeWMuemFjeWIsOeahOW+heWhq+WFhemhueeahOi1t+Wni+S9jee9ruS5i+mXtOeahOmDqOWIhu+8jOebtOaOpeS/neeVmeOAglxyXG4gICAgICAgIGlmIChtYXRjaC5pbmRleCA+IGxhc3RJbmRleCkge1xyXG4gICAgICAgICAgICBjb2RlLnB1c2goXCJyZXN1bHQucHVzaCgnXCIgKyB0ZW1wbGF0ZS5zdWJzdHJpbmcobGFzdEluZGV4LCBtYXRjaC5pbmRleCkgKyBcIicpO1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBleHByZXNzaW9uID0gbWF0Y2hbMV07XHJcbiAgICAgICAgLy8g5aaC5p6c5piv6YC76L6R6KGo6L6+5byP77yM5bCG5YW25L2c5Li65LiA6KGM5Luj56CB5o+S5YWl5Yiw5riy5p+T5Ye95pWw5Lit44CCXHJcbiAgICAgICAgaWYgKEVYUFJFU1NJT05fUkVHRVgudGVzdChleHByZXNzaW9uKSkge1xyXG4gICAgICAgICAgICBjb2RlLnB1c2goZXhwcmVzc2lvbik7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOaYr+S4gOS4quWPmOmHj++8jOiOt+WPluWug+eahOWAvOeUqOS6juWhq+WFheWug+aJgOWcqOeahOS9jee9ruOAglxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvZGUucHVzaChcInJlc3VsdC5wdXNoKFwiICsgZXhwcmVzc2lvbiArIFwiKTtcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsYXN0SW5kZXggPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlpITnkIbmqKHmnb/mnKvlsL7nmoTpnZ7lvoXloavlhYXmlofmnKzjgIJcclxuICAgIGlmIChsYXN0SW5kZXggPCB0ZW1wbGF0ZS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgY29kZS5wdXNoKFwicmVzdWx0LnB1c2goJ1wiICsgdGVtcGxhdGUuc3Vic3RyaW5nKGxhc3RJbmRleCwgdGVtcGxhdGUubGVuZ3RoKSArIFwiJyk7XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvZGUucHVzaChcInJldHVybiByZXN1bHQuam9pbignJyk7XCIpO1xyXG4gICAgLy8gY29uc29sZS5sb2coY29kZS5qb2luKFwiXCIpLnJlcGxhY2UoL1xcbnxcXHIvZywgXCJcIikpO1xyXG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihjb2RlLmpvaW4oXCJcIikucmVwbGFjZSgvXFxufFxcci9nLCBcIlwiKSkuYXBwbHkoY29udGVudHMpO1xyXG59IiwiaW1wb3J0IHsgdGVtcGxhdGUgfSBmcm9tICcuL3RlbXBsYXRlLmpzJztcclxuaW1wb3J0IHJlbmRlciBmcm9tICcuL2VuZ2luZS5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBkaXNwbGF5O1xyXG5cclxuLy8g55So5LqO5a2Y5YKo5LiA5LiqZGl25YWD57Sg77yM6L+Z5Liq5YWD57Sg55So5p2l5Zyo6aG16Z2i55qE5Y+z5L6n5bGV56S657+76K+R57uT5p6cXHJcbnZhciBmcmFtZTtcclxuXHJcbnZhciBtb3VzZWRvd24gPSBmYWxzZTsgLy8g5Zyo6byg5qCH5ouW5Yqo6L655qGG5pe277yM55So5LqO5qCH6K6w6byg5qCH5piv5ZCm5bey57uP5oyJ5LiLXHJcbnZhciBvcmlnaW5YOyAvLyDpvKDmoIflvIDlp4vmi5bliqjnmoR45Z2Q5qCH6L205Yid5aeL5L2N572uXHJcbnZhciBvcmlnaW5XaWR0aDsgLy8g5L6n6L655qCP55qE5Yid5aeL5a695bqmXHJcblxyXG4vKipcclxuICog6LSf6LSj5qC55o2u5Lyg5YWl55qE57+76K+R57uT5p6c5YaF5a655bCG57uT5p6c5pi+56S65Zyo55So5oi35q2j5Zyo5L2/55So55qE6aG16Z2i5LitXHJcbiAqIFxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGVudCDnv7vor5HnmoTnu5PmnpxcclxuICovXHJcbmZ1bmN0aW9uIGRpc3BsYXkoY29udGVudCkge1xyXG4gICAgY3JlYXRlQmxvY2soY29udGVudCk7XHJcbiAgICBjaHJvbWUucnVudGltZS5vbk1lc3NhZ2UucmVtb3ZlTGlzdGVuZXIoZGlzcGxheSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlnKjpobXpnaLnmoTlj7PkvqfliJvlu7rkuIDlnZfljLrln5/vvIznlKjkuo7mmL7npLrnv7vor5HnmoTnu5PmnpzvvIzliJvlu7rkuIDkuKpmcmFtZeWFg+e0oO+8jOWwhuWFtuaPkuWFpeWIsGRvY3VtZW505LitXHJcbiAqIFxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGVudCDnv7vor5HnmoTnu5PmnpxcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUJsb2NrKGNvbnRlbnQpIHtcclxuICAgIC8vIOWIpOaWrWZyYW1l5piv5ZCm5bey57uP5re75Yqg5Yiw5LqG6aG16Z2i5LitXHJcbiAgICBpZiAoIWlzQ2hpbGROb2RlKGZyYW1lLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpKSB7IC8vIGZyYW1l5LiN5Zyo6aG16Z2i5Lit77yM5Yib5bu65paw55qEZnJhbWVcclxuICAgICAgICBmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xyXG4gICAgICAgIGZyYW1lLmlkID0gJ3RyYW5zbGF0ZV9mcmFtZSc7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS50cmFuc2l0aW9uID0gJ3dpZHRoIDUwMG1zJztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLndpZHRoID0gJzg1JSc7XHJcbiAgICAgICAgLy8g5bCGZnJhbWXmlL7lhaVkb2N1bWVudFxyXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChmcmFtZSk7XHJcbiAgICB9IGVsc2UgeyAvLyBmcmFtZeW3sue7j+WcqOmhtemdouS4re+8jOebtOaOpeaUueWPmGZyYW1l55qE5riy5p+T5YaF5a65XHJcbiAgICAgICAgZnJhbWUuc3R5bGUudHJhbnNpdGlvbiA9ICdub25lJztcclxuICAgICAgICBmcmFtZS5zdHlsZS5yaWdodCA9ICctJyArIGZyYW1lLmNsaWVudFdpZHRoICsgJ3B4JztcclxuICAgICAgICAvLyDov5nkuKrlu7bml7bnmoTnm67nmoTmmK/kvb/lvpfkvqfovrnmoI/lh7rnjrDnmoTov4fmuKHliqjnlLvnlJ/mlYhcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZnJhbWUuc3R5bGUudHJhbnNpdGlvbiA9ICdyaWdodCAzMDBtcyc7XHJcbiAgICAgICAgICAgIGZyYW1lLnN0eWxlLnJpZ2h0ID0gJzAnO1xyXG4gICAgICAgIH0sIDUwKTtcclxuICAgIH1cclxuICAgIGZyYW1lLmlubmVySFRNTCA9IHJlbmRlcih0ZW1wbGF0ZSwgY29udGVudCk7IC8vIOWwhnRlbXBsYXRlLmpz5Lit55qE5YaF5a656YCa6L+HZW5naW5lLmpz5riy5p+T5oiQaHRtbOWFg+e0oFxyXG4gICAgYWRkRXZlbnRMaXN0ZW5lcigpO1xyXG59XHJcblxyXG4vKipcclxuICog6ZyA6KaB5a+55L6n6L655qCP5Lit55qE5YWD57Sg5re75Yqg5LqL5Lu255uR5ZCs5pe277yM6K+35Zyo5q2k5Ye95pWw5Lit5re75YqgXHJcbiAqL1xyXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgLy8g57uZ5YWz6Zet5oyJ6ZKu5re75Yqg54K55Ye75LqL5Lu255uR5ZCs77yM55So5LqO5YWz6Zet5L6n6L655qCPXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0cmFuc2xhdGUtaWNvbi1jbG9zZScpWzBdLm9uY2xpY2sgPSByZW1vdmVTbGlkZXI7XHJcbiAgICAvLyDnu5nngrnlh7vkvqfovrnmoI/kuYvlpJbljLrln5/kuovku7bmt7vliqDnm5HlkKzvvIzngrnlh7vkvqfovrnmoI/kuYvlpJbnmoTpg6jliIblsLHkvJrorqnkvqfovrnmoI/lhbPpl61cclxuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBjbGlja0xpc3RlbmVyKTtcclxuICAgIGZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGRyYWdIYW5kbGVyKTtcclxuICAgIGZyYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdmVIYW5kbGVyKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRyYWdPbik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZHJhZ09mZik7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0cmFuc2xhdGUtaWNvbi10dWRpbmctZml4JylbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmaXhPbik7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0cmFuc2xhdGUtaWNvbi10dWRpbmctZnVsbCcpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZml4T2ZmKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFxyXG4gKiDkuIDkuKrlt6XlhbdhcGks5Yik5pat5Lyg5YWl55qE56ys5LiA5Liq5YWD57Sg5piv5ZCm5piv5Lyg5YWl55qE56ys5LqM5Liq5YWD57Sg55qE5a2Q6IqC54K5XHJcbiAqIFxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUxIOesrOS4gOS4qmRvY3VtZW50IEVsZW1lbnQg5YWD57SgLOmdnuepulxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUyIOesrOS6jOS4qmRvY3VtZW50IEVsZW1lbnQg5YWD57Sg77yM6Z2e56m6XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0NoaWxkTm9kZShub2RlMSwgbm9kZTIpIHtcclxuICAgIC8vIOWIpOaWreS8oOWFpeeahOWPguaVsOaYr+WQpuWQiOazlVxyXG4gICAgaWYgKCEobm9kZTEgJiYgbm9kZTIpKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIHdoaWxlIChub2RlMSAmJiAhbm9kZTEuaXNTYW1lTm9kZShkb2N1bWVudC5ib2R5KSkge1xyXG4gICAgICAgIGlmIChub2RlMS5pc1NhbWVOb2RlKG5vZGUyKSlcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBub2RlMSA9IG5vZGUxLnBhcmVudE5vZGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBibG9jayBzdGFydFxyXG4gKiDkuovku7bnm5HlkKznmoTlm57osIPlh73mlbDlrprkuYnor7flnKjmraTljLrln5/kuK3ov5vooYxcclxuICovXHJcblxyXG4vKipcclxuICogXHJcbiAqIOeUqOS6juWkhOeQhueCueWHu+mhtemdoumZpOS+p+i+ueagj+WklueahOWMuuWfn+eahOWbnuiwg+WHveaVsCDvvIzotJ/otKPlsIbkvqfovrnmoI/lhbPpl61cclxuICogXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCDngrnlh7vkuovku7bnmoRvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIGNsaWNrTGlzdGVuZXIoZXZlbnQpIHtcclxuICAgIGxldCBub2RlID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgaWYgKCFpc0NoaWxkTm9kZShub2RlLCBmcmFtZSkpIHtcclxuICAgICAgICByZW1vdmVTbGlkZXIoKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWwhuS+p+i+ueagj+WFg+e0oOS7jumhtemdouS4remZpOWOu++8jOWNs+WwhmZyYW1l5LuOZG9jdW1lbnTkuK3liKDpmaRcclxuICovXHJcbmZ1bmN0aW9uIHJlbW92ZVNsaWRlcigpIHtcclxuICAgIGlmIChpc0NoaWxkTm9kZShmcmFtZSwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSkge1xyXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZChmcmFtZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgY2xpY2tMaXN0ZW5lcik7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZHJhZ09uKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZHJhZ09mZik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlpITnkIbpvKDmoIfnmoTmi5bliqjkuovku7ZcclxuICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IFxyXG4gKi9cclxuZnVuY3Rpb24gZHJhZ09uKGV2ZW50KSB7XHJcbiAgICBpZiAobW91c2Vkb3duKSB7XHJcbiAgICAgICAgZnJhbWUuc3R5bGUud2lkdGggPSBvcmlnaW5YIC0gZXZlbnQueCArIG9yaWdpbldpZHRoICsgJ3B4JztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLndpZHRoID0gd2luZG93LmlubmVyV2lkdGggLSBvcmlnaW5XaWR0aCAtIChvcmlnaW5YIC0gZXZlbnQueCkgKyAncHgnO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog5aSE55CG6YeK5pS+6byg5qCH5oyJ6ZKu5ZCO77yM6L655qGG55qE5a695bqm5YGc5q2i5pS55Y+Y55qE5LqL5Lu2XHJcbiAqL1xyXG5mdW5jdGlvbiBkcmFnT2ZmKCkge1xyXG4gICAgaWYgKG1vdXNlZG93bikge1xyXG4gICAgICAgIGZyYW1lLnN0eWxlLnRyYW5zaXRpb24gPSAnd2lkdGggNTAwbXMnO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudHJhbnNpdGlvbiA9ICd3aWR0aCA1MDBtcyc7XHJcbiAgICAgICAgbW91c2Vkb3duID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICog5aSE55CG6byg5qCH56e75Yqo5Yiw5L6n6L655qCP6L655qGG6ZmE6L+R5pe277yM6byg5qCH5qC35byP55qE5pS55Y+Y5Yqf6IO9XHJcbiAqIFxyXG4gKiBAcGFyYW0ge09iamVjdH0gZXZlbnQg5LqL5Lu25Y+R55Sf55qE5YWo6YOo5L+h5oGvXHJcbiAqL1xyXG5mdW5jdGlvbiBkcmFnSGFuZGxlcihldmVudCkge1xyXG4gICAgdmFyIG5vZGUgPSBldmVudC50YXJnZXQ7XHJcbiAgICBpZiAobm9kZS5pc1NhbWVOb2RlKGZyYW1lKSkge1xyXG4gICAgICAgIGlmIChldmVudC54IDw9IG5vZGUub2Zmc2V0TGVmdCArIDQpIHtcclxuICAgICAgICAgICAgbW91c2Vkb3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgZnJhbWUuc3R5bGUudHJhbnNpdGlvbiA9ICdub25lJztcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBvcmlnaW5YID0gbm9kZS5vZmZzZXRMZWZ0O1xyXG4gICAgICAgICAgICBvcmlnaW5XaWR0aCA9IG5vZGUuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogXHJcbiAqIOWkhOeQhum8oOagh+enu+WKqOWIsOS+p+i+ueagj+mZhOi/kem8oOagh+W9oueKtueahOaUueWPmOeJueaViFxyXG4gKiBcclxuICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IOS6i+S7tuWPkeeUn+eahOaJgOacieS/oeaBr1xyXG4gKi9cclxuZnVuY3Rpb24gbW92ZUhhbmRsZXIoZXZlbnQpIHtcclxuICAgIHZhciBub2RlID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgaWYgKG5vZGUuaXNTYW1lTm9kZShmcmFtZSkpIHtcclxuICAgICAgICBpZiAoZXZlbnQueCA8PSBub2RlLm9mZnNldExlZnQgKyA0KVxyXG4gICAgICAgICAgICBmcmFtZS5zdHlsZS5jdXJzb3IgPSAnZS1yZXNpemUnO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgZnJhbWUuc3R5bGUuY3Vyc29yID0gJ2F1dG8nO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog6LSf6LSj5bCG5L6n6L655qCP5Zu65a6aXHJcbiAqL1xyXG5mdW5jdGlvbiBmaXhPbigpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RyYW5zbGF0ZS1pY29uLXR1ZGluZy1mdWxsJylbMF0uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndHJhbnNsYXRlLWljb24tdHVkaW5nLWZpeCcpWzBdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgY2xpY2tMaXN0ZW5lcik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDotJ/otKPop6PpmaTkvqfovrnmoI/nmoTlm7rlrppcclxuICovXHJcbmZ1bmN0aW9uIGZpeE9mZigpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RyYW5zbGF0ZS1pY29uLXR1ZGluZy1mdWxsJylbMF0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RyYW5zbGF0ZS1pY29uLXR1ZGluZy1maXgnKVswXS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XHJcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgY2xpY2tMaXN0ZW5lcik7XHJcbn1cclxuLyoqXHJcbiAqIGVuZCBibG9ja1xyXG4gKi9cclxuXHJcblxyXG5jaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoZGlzcGxheSk7IiwiaW1wb3J0IHsgdHJhbnNsYXRlIH0gZnJvbSAnLi90cmFuc2xhdGUuanMnO1xyXG5pbXBvcnQgZGlzcGxheSBmcm9tICcuL2Rpc3BsYXkvZGlzcGxheS5qcyc7XHJcbi8qKlxyXG4gKiDliJLor43nv7vor5Hlip/og73nmoTlrp7njrBcclxuICog6ZyA6KaB5a+56aG16Z2i55qE55u45YWz5LqL5Lu26L+b6KGM55uR5ZCs77yM5qC55o2u55So5oi36K6+5a6a5p2l5Yaz5a6a5piv5ZCm6L+b6KGM55uR5ZCs44CCXHJcbiAqL1xyXG5jaHJvbWUuc3RvcmFnZS5zeW5jLmdldChcIk90aGVyU2V0dGluZ3NcIiwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgdmFyIE90aGVyU2V0dGluZ3MgPSByZXN1bHQuT3RoZXJTZXR0aW5ncztcclxuICAgIGlmIChPdGhlclNldHRpbmdzICYmIE90aGVyU2V0dGluZ3NbXCJTZWxlY3RUcmFuc2xhdGVcIl0pIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgc2hvd0J1dHRvbik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZGlzcGVhckJ1dHRvbik7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIOW9k+eUqOaIt+abtOaUueiuvuWumuaXtua3u+WKoOaIluWIoOmZpOS6i+S7tuebkeWQrOOAglxyXG4gKi9cclxuY2hyb21lLnN0b3JhZ2Uub25DaGFuZ2VkLmFkZExpc3RlbmVyKGZ1bmN0aW9uIChjaGFuZ2VzLCBhcmVhKSB7XHJcbiAgICBpZiAoYXJlYSA9PT0gXCJzeW5jXCIgJiYgY2hhbmdlc1tcIk90aGVyU2V0dGluZ3NcIl0pIHtcclxuICAgICAgICBpZiAoY2hhbmdlc1tcIk90aGVyU2V0dGluZ3NcIl0ubmV3VmFsdWVbXCJTZWxlY3RUcmFuc2xhdGVcIl0pIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHNob3dCdXR0b24pO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBkaXNwZWFyQnV0dG9uKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBzaG93QnV0dG9uKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBkaXNwZWFyQnV0dG9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIOWIm+W7uue/u+ivkeaMiemSrueahOWbvuagh+WFg+e0oFxyXG4gKi9cclxudmFyIHRyYW5zbGF0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG52YXIgZGlzYWJsZSA9IHRydWU7IC8vIOeUqOS6juWunueOsOeCueWHu+WujOaMiemSruWQjuaMiemSrua2iOWkseeahOWKn+iDve+8jOeUqOS6juWcqOafkOS6m+aDheWGteS4i+emgeatouaMiemSrueahOaYvuekulxyXG52YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbmltZy5zcmMgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQ0FNQUFBQW9MUTlUQUFBQUJHZEJUVUVBQUxHUEMveGhCUUFBQUNCalNGSk5BQUI2SmdBQWdJUUFBUG9BQUFDQTZBQUFkVEFBQU9wZ0FBQTZtQUFBRjNDY3VsRThBQUFCcWxCTVZFVUFBQUJRa3NFbG5meEhnc1ZZbTlOTWx2RTBRbkV6UktjeFJhOHdRNjh1UWFvcVBLUXFPbzhyUFpGR1h0dExlUDRhTTFaZ3MvdFpwK1FNRHlwT21NNUhpL2d5ZDlZNVphaEptL29hTEVvU0V6UVRJSGdVSVhzVUgxa1JGQlFQR1MxQ2h1WTJlOWsvYUpnS1E3eE9wdjgzZk41ZXR2OHhTWEZJY0lrM25mOHZYSXN3ZXVneWZmTVlIRFZjZ3Y5RVlNazJXbnhab2Y4eGNPRTdkZGdVVStKaHN2OHdXSXd0cHRJMmQrZ3BhTUVxYmRFMldJa3pkT1k4Z3RrblNJazhZTUpDWnNwRFo4Yy9ZNzVEYUxjMldKczdkOVEzVjVrSEFBQXpYOUV4VzRvdWp1ZExnTjg1ZU40OWYrZzVlZVE0ZWVNM2QrQTVldUk4aGVnclc3bzJhOUErWjZnR0J4MHJhZEF1V1lGY28vOG5SSEZtd3Y5WHR2OVRxUDlEaHZkSGpQcGVxLzltdVA5a3R2cGp0dmxodFB0ZnNmeGdzZjlnci9oendmOVJyLzlFamZ0Tmt2cE9tZjlPblA5T20vOVFuUDlRbGZ0RGl2dEZrdjlmdC85WHBQOXcwZjlXbmY5ZnRQOXZ5UDlwdi85b3N2OXcwdjlpcmY5TW5QOWN1djlsdC85TWx2OVhxUDlRbi85UG9QOVFvUDlPbmY5ZHQvOUNnL1Uva1A5dTF2OU9vUDlodmY5cXpQOEFBQURBYVhCVkFBQUFXM1JTVGxNQWJ5YXFydlFtSUNFaUlpSWlJaUlRRytlREZzZjlpSkg0R1JJVkZSVVZGTEYraXdTN2VGcGpVaU5aa1dOTUFoR1NuMFgxQWJDQUVFemxuV2xNOG9pR2lJZUdob1BKamhGYVVTbUlpWWlJaUllSGhvTEhjQVNuV3A1eFJXdzVhd0FBQUFGaVMwZEVBSWdGSFVnQUFBQUpjRWhaY3dBU0JhNEFFZ1d1QVdtS3MxTUFBQURHU1VSQlZCalRZMkFBQWtZbUJoVEFISTNLWjRsaFpXUG40T1RpNXVIbDQyZGdFQkNNall0UFNFeEtUa2xOUzg4UVltQVFGc25NRXMzT3ljM0x5eThvTEJJRGFSRXZscENVa3BhUmxaTlhLRkVFRzZKVXFnd3hUYVZNRlVpcXFUTm9hRUlFdE1xMWdhUk9oUzZFcTZmUFlHQUlwSTBxalNFQ0pxWm1ET1pBMnFMS0V1b2dxMnByRUdWVFkydG43K0RvNU96aVdsdm41czdBNEZIZjBOalUzTkxjMnRiUzN0SHB5Y0RnNWUzajYrY2ZFQmdVSE5MVkhScUc3S253bmdoVVgwWkdBUWtBUmRFb0JPNk5ZUXdBQUFBQVNVVk9SSzVDWUlJPSc7XHJcbnRyYW5zbGF0ZUJ1dHRvbi5hcHBlbmRDaGlsZChpbWcpO1xyXG50cmFuc2xhdGVCdXR0b24uaWQgPSAndHJhbnNsYXRlLWJ1dHRvbic7IC8vIOatpGlk5a+55bqU5LqOLi9kaXNwbGF5L2Rpc3BsYXkuY3Nz5paH5Lu25Lit55qE5qC35byPXHJcbmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0cmFuc2xhdGVCdXR0b24pO1xyXG50cmFuc2xhdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdHJhbnNsYXRlU3VibWl0KTtcclxuXHJcbi8qKlxyXG4gKiDlvZPpvKDmoIfpgInkuK3kuIDmrrXmloflrZflkI7vvIzosIPnlKjmraTlh73mlbDvvIzmmL7npLrlh7rnv7vor5HmjInpkq5cclxuICovXHJcbmZ1bmN0aW9uIHNob3dCdXR0b24oKSB7XHJcbiAgICBpZiAoZGlzYWJsZSkge1xyXG4gICAgICAgIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb24udG9TdHJpbmcoKS50cmltKCkpIHsgLy8g5qOA5p+l6aG16Z2i5Lit5piv5ZCm5pyJ5YaF5a656KKr6YCJ5LitXHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgLy8g57+76K+R5oyJ6ZKu55qE57q15Z2Q5qCH5L2N572u77ya6YCJ5Lit5Yy65Z+f6auY5bqmICsgeeaWueWQkea7muWKqOeahOmrmOW6piArIOmAieS4reWMuuWfn+S9jee9riArIOe7huW+rumrmOW6puiwg+aVtFxyXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlQnV0dG9uLnN0eWxlLnRvcCA9IGVsZW1lbnQuaGVpZ2h0ICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCArIGVsZW1lbnQudG9wICsgMyArICdweCc7XHJcbiAgICAgICAgICAgICAgICAvLyDnv7vor5HmjInpkq7nmoTmqKrlnZDmoIfkvY3nva7vvJrpgInkuK3ljLrln5/nmoTlrr3luqbnmoTkuIDljYoo5L2/57+76K+R5oyJ6ZKu5bGF5LitKSArIHjmlrnlkJHmu5rliqjnmoTot53nprsgKyDpgInkuK3ljLrln5/nmoTkvY3nva4gLSDmjInpkq7oh6rouqvlrr3luqbnmoTkuIDljYoo5L2/57+76K+R5oyJ6ZKu5bGF5LitKVxyXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlQnV0dG9uLnN0eWxlLmxlZnQgPSBlbGVtZW50LndpZHRoIC8gMiArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0ICsgZWxlbWVudC5sZWZ0IC0gMTAgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgLy8g5L2/57+76K+R5oyJ6ZKu5pi+56S65Ye65p2lXHJcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIOS9v+e/u+ivkeaMiemSrumakOiXj1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWkhOeQhueCueWHu+e/u+ivkeaMiemSruWQjueahOS6i+S7tlxyXG4gKi9cclxuZnVuY3Rpb24gdHJhbnNsYXRlU3VibWl0KCkge1xyXG4gICAgZGlzYWJsZSA9IGZhbHNlOyAvLyDnpoHmraLmjInpkq7mmL7npLpcclxuICAgIC8vIOiwg+eUqHRyYW1zbGF0ZS5qcyDkuK3nmoTnv7vor5FhcGlcclxuICAgIHRyYW5zbGF0ZSh3aW5kb3cuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKSwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIHRyYW5zbGF0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIGRpc3BsYXkocmVzdWx0KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICog5aaC5p6c6aG16Z2i5Lit5rKh5pyJ6byg5qCH6YCJ5Lit55qE5Yy65Z+f77yM6LCD55So5q2k5Ye95pWw5Y675o6J57+76K+R5oyJ6ZKuXHJcbiAqL1xyXG5mdW5jdGlvbiBkaXNwZWFyQnV0dG9uKCkge1xyXG4gICAgdmFyIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghc2VsZWN0aW9uLnRvU3RyaW5nKCkudHJpbSgpKSB7XHJcbiAgICAgICAgICAgIHRyYW5zbGF0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBkaXNhYmxlID0gdHJ1ZTsgLy8g5Zue5aSN5oyJ6ZKu5pi+56S6XHJcbiAgICAgICAgfVxyXG4gICAgfSwgMTAwKTtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghc2VsZWN0aW9uLnRvU3RyaW5nKCkudHJpbSgpKSB7XHJcbiAgICAgICAgICAgIHRyYW5zbGF0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBkaXNhYmxlID0gdHJ1ZTsgLy8g5Zue5aSN5oyJ6ZKu5pi+56S6XHJcbiAgICAgICAgfVxyXG4gICAgfSwgNDAwKTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9