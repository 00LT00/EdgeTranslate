!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});const r="https://translate.google.cn/translate_a/single?client=gtx";function a(e,t){chrome.storage.sync.get("languageSetting",function(n){var a=n.languageSetting,o=r+"&sl="+a.sl+"&tl="+a.tl;chrome.storage.sync.get("DTSetting",function(n){var r=o,a=n.DTSetting,s=new XMLHttpRequest;a.forEach(e=>{r=r+"&dt="+e}),s.open("GET",r+"&q="+e,!0),s.send(),s.onreadystatechange=function(){4===s.readyState&&200===s.status?t(function(e){for(var t=new Object,n=0;n<e.length;n++)if(e[n]){var r=e[n];switch(n){case 0:var a=[],o=[];r.forEach(e=>{a.push(e[0]),o.push(e[1])}),t.mainMeaning=a.join(""),t.originalText=o.join("");break;case 1:t.detailedMeanings=new Array,r.forEach(e=>t.detailedMeanings.push({type:e[0],meaning:e[1].join(", ")}));break;case 5:if(r.length<=1){let e=new Array;r[0][2].forEach(t=>e.push(t[0])),t.commonMeanings=e.join(", ")}break;case 11:t.synonyms=new Array,r.forEach(e=>{let n=new Object;n.type=e[0],n.words=new Array,e[1].forEach(e=>n.words.push(e[0].join(", "))),t.synonyms.push(n)});break;case 12:t.definitions=new Array,r.forEach(e=>{let n=new Object;n.type=e[0],n.meanings=new Array,e[1].forEach(e=>n.meanings.push({meaning:e[0],example:e[2]})),t.definitions.push(n)});break;case 13:t.examples=new Array,r.forEach(e=>e.forEach(e=>t.examples.push(e[0])));break;case 14:t.phrases=r[0]}}return t}(JSON.parse(s.response))):200!==s.status&&alert("无法请求翻译，请检查网络连接")}})})}function o(e,t){chrome.tabs.query({active:!0,currentWindow:!0},function(n){chrome.runtime.lastError?alert(e.mainMeaning):chrome.tabs.executeScript(n[0].id,{file:"./display/display.js"},function(r){chrome.runtime.lastError?chrome.extension.isAllowedFileSchemeAccess(function(t){if(t)alert(e.mainMeaning);else if(confirm(chrome.i18n.getMessage("PermissionRemind"))){let e="chrome://extensions/?id="+chrome.runtime.id;chrome.tabs.create({url:e,index:n[0].index})}else alert(e.mainMeaning)}):e&&(chrome.tabs.sendMessage(n[0].id,e),t&&t())})})}},,function(e,t,n){"use strict";n.r(t);var r=n(0);const a={sl:"auto",tl:"zh-CN"},o=["t","at","bd","ex","md","rw","ss"],s={SelectTranslate:!0};chrome.runtime.onInstalled.addListener(function(){chrome.contextMenus.create({id:"translate",title:chrome.i18n.getMessage("Translate")+" '%s'",contexts:["selection"]}),chrome.storage.sync.get("languageSetting",function(e){e.languageSetting||chrome.storage.sync.set({languageSetting:a})}),chrome.storage.sync.get("DTSetting",function(e){e.DTSetting||chrome.storage.sync.set({DTSetting:o})}),chrome.storage.sync.get("OtherSettings",function(e){e.OtherSettings||chrome.storage.sync.set({OtherSettings:s})}),chrome.tabs.create({url:"https://github.com/nickyc975/EdgeTranslate/wiki"})}),chrome.runtime.onStartup.addListener(function(){chrome.contextMenus.removeAll(),chrome.contextMenus.create({id:"translate",title:chrome.i18n.getMessage("Translate")+" '%s'",contexts:["selection"]})}),chrome.contextMenus.onClicked.addListener(function(e,t){var n=e.selectionText;Object(r.b)(n,function(e){Object(r.a)(e)})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RyYW5zbGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5pdC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkJBU0VfVVJMIiwidHJhbnNsYXRlIiwidGV4dCIsImNhbGxiYWNrIiwiY2hyb21lIiwic3RvcmFnZSIsInN5bmMiLCJyZXN1bHQiLCJsYW5ndWFnZVNldHRpbmciLCJ0bXBVcmwiLCJzbCIsInRsIiwidXJsIiwiRFRTZXR0aW5nIiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwiZm9yRWFjaCIsImVsZW1lbnQiLCJvcGVuIiwic2VuZCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXNwb25zZSIsImxlbmd0aCIsIml0ZW1zIiwibWFpbk1lYW5pbmdzIiwib3JpZ2luYWxUZXh0cyIsIml0ZW0iLCJwdXNoIiwibWFpbk1lYW5pbmciLCJqb2luIiwib3JpZ2luYWxUZXh0IiwiZGV0YWlsZWRNZWFuaW5ncyIsIkFycmF5IiwidHlwZSIsIm1lYW5pbmciLCJtZWFuaW5nQXJyYXkiLCJjb21tb25NZWFuaW5ncyIsInN5bm9ueW1zIiwid29yZHMiLCJkZWZpbml0aW9ucyIsImRlZmluaXRpb24iLCJtZWFuaW5ncyIsImV4YW1wbGUiLCJleGFtcGxlcyIsInBocmFzZXMiLCJwYXJzZVRyYW5zbGF0ZSIsIkpTT04iLCJwYXJzZSIsImFsZXJ0Iiwic2hvd1RyYW5zbGF0ZSIsImNvbnRlbnQiLCJ0YWJzIiwicXVlcnkiLCJhY3RpdmUiLCJjdXJyZW50V2luZG93IiwicnVudGltZSIsImxhc3RFcnJvciIsImV4ZWN1dGVTY3JpcHQiLCJpZCIsImZpbGUiLCJ0YWIiLCJleHRlbnNpb24iLCJpc0FsbG93ZWRGaWxlU2NoZW1lQWNjZXNzIiwiaXNBbGxvd2VkQWNjZXNzIiwiY29uZmlybSIsImkxOG4iLCJnZXRNZXNzYWdlIiwiaW5kZXgiLCJzZW5kTWVzc2FnZSIsIkRFRkFVTFRfTEFOR1VBR0VfU0VUVElORyIsIkRFRkFVTFRfRFRfU0VUVElORyIsIkRFRkFVTFRfT1RIRVJfU0VUVElOR1MiLCJTZWxlY3RUcmFuc2xhdGUiLCJvbkluc3RhbGxlZCIsImFkZExpc3RlbmVyIiwiY29udGV4dE1lbnVzIiwidGl0bGUiLCJjb250ZXh0cyIsInNldCIsIk90aGVyU2V0dGluZ3MiLCJvblN0YXJ0dXAiLCJyZW1vdmVBbGwiLCJvbkNsaWNrZWQiLCJpbmZvIiwic2VsZWN0aW9uVGV4dCIsIl90cmFuc2xhdGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFh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QUE3RyxDQUFBNkIiLCJmaWxlIjoiaW5pdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbiIsImV4cG9ydCB7IHRyYW5zbGF0ZSwgc2hvd1RyYW5zbGF0ZSB9O1xyXG4vKipcclxuICog57+76K+R5o6l5Y+j44CCXHJcbiAqL1xyXG5jb25zdCBCQVNFX1VSTCA9IFwiaHR0cHM6Ly90cmFuc2xhdGUuZ29vZ2xlLmNuL3RyYW5zbGF0ZV9hL3NpbmdsZT9jbGllbnQ9Z3R4XCI7XHJcblxyXG4vKipcclxuICogXHJcbiAqIOatpOWHveaVsOi0n+i0o+WwhuS8oOWFpeeahOaWh+acrOe/u+ivke+8jOW5tuWcqOW9k+WJjemhtemdoueahOS+p+i+ueagj+S4reWxleekulxyXG4gKiBcclxuICogQHBhcmFtIHtTdHJpbmd9IHRleHQg6ZyA6KaB57+76K+R55qE5paH5pys5a2X56ym5LiyXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIOWujOaIkOe/u+ivkeWQjueUqOS7peiOt+WPlue/u+ivkee7k+aenFxyXG4gKi9cclxuZnVuY3Rpb24gdHJhbnNsYXRlKHRleHQsIGNhbGxiYWNrKSB7XHJcblxyXG4gICAgLy8g6I635Y+W57+76K+R6K+t6KiA6K6+5a6a44CCXHJcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChcImxhbmd1YWdlU2V0dGluZ1wiLCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgdmFyIGxhbmd1YWdlU2V0dGluZyA9IHJlc3VsdC5sYW5ndWFnZVNldHRpbmc7XHJcbiAgICAgICAgdmFyIHRtcFVybCA9IEJBU0VfVVJMICsgXCImc2w9XCIgKyBsYW5ndWFnZVNldHRpbmcuc2wgKyBcIiZ0bD1cIiArIGxhbmd1YWdlU2V0dGluZy50bDtcclxuXHJcbiAgICAgICAgLy8g6I635Y+W57+76K+R5Y+C5pWw6K6+5a6a44CCXHJcbiAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoXCJEVFNldHRpbmdcIiwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gdG1wVXJsO1xyXG4gICAgICAgICAgICB2YXIgRFRTZXR0aW5nID0gcmVzdWx0LkRUU2V0dGluZztcclxuICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgICAgICAgICAgIERUU2V0dGluZy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXJsID0gdXJsICsgXCImZHQ9XCIgKyBlbGVtZW50O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJlcXVlc3Qub3BlbihcIkdFVFwiLCB1cmwgKyBcIiZxPVwiICsgdGV4dCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3Quc2VuZCgpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT09IDQgJiYgcmVxdWVzdC5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHBhcnNlVHJhbnNsYXRlKEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZSkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlcXVlc3Quc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydCgn5peg5rOV6K+35rGC57+76K+R77yM6K+35qOA5p+l572R57uc6L+e5o6lJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIDxwPuino+aekOiwt+atjOe/u+ivkei/lOWbnueahOe7k+aenOOAguino+aekOe7k+aenOe7k+aehOWmguS4i++8mjwvcD5cclxuICogXHJcbiAqIDxwcmU+XHJcbiAqICAgICByZXN1bHQgPSB7XHJcbiAqICAgICAgICAgXCJtYWluTWVhbmluZ1wiOiA85a2X56ym5Liy77yM5Y2V6K+N55qE5Li76KaB5oSP5oCd77yM5Y+l5a2Q55qE5pyA5Y+v6IO955qE5oSP5oCdPixcclxuICogICAgICAgICBcIm9yaWdpbmFsVGV4dFwiOiA85a2X56ym5Liy77yM6KKr57+76K+R55qE5Y2V6K+N5oiW5Y+l5a2QPixcclxuICogICAgICAgICBcImRldGFpbGVkTWVhbmluZ3NcIjogW1xyXG4gKiAgICAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICAgICBcInR5cGVcIjogPOWtl+espuS4su+8jOWNleivjeeahOivjeaApz4sXHJcbiAqICAgICAgICAgICAgICAgICBcIm1lYW5pbmdcIjogPOWtl+espuS4su+8jOWNleivjeWcqOivpeivjeaAp+S4i+eahOaJgOacieaEj+aAnT5cclxuICogICAgICAgICAgICAgfVxyXG4gKiAgICAgICAgIF0sXHJcbiAqICAgICAgICAgXCJjb21tb25NZWFuaW5nc1wiOiA85a2X56ym5Liy77yM5Y2V6K+N55qE5bi46KeB5oSP5oCd77yM5Y+l5a2Q55qE5omA5pyJ5Y+v6IO95oSP5oCdPixcclxuICogICAgICAgICBcInN5bm9ueW1zXCI6IFtcclxuICogICAgICAgICAgICAge1xyXG4gKiAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IDzlrZfnrKbkuLLvvIzljZXor43nmoTor43mgKc+LFxyXG4gKiAgICAgICAgICAgICAgICAgXCJ3b3Jkc1wiOiBbXHJcbiAqICAgICAgICAgICAgICAgICAgICAgPOWtl+espuS4su+8jOWNleivjeWcqOivpeivjeaAp+S4i+eahOi/keS5ieivje+8jOagueaNruaEj+aAneWIhue7hD5cclxuICogICAgICAgICAgICAgICAgIF1cclxuICogICAgICAgICAgICAgfVxyXG4gKiAgICAgICAgIF0sXHJcbiAqICAgICAgICAgXCJkZWZpbml0aW9uc1wiOiBbXHJcbiAqICAgICAgICAgICAgIHtcclxuICogICAgICAgICAgICAgICAgIFwidHlwZVwiOiA85a2X56ym5Liy77yM5Y2V6K+N55qE6K+N5oCnPixcclxuICogICAgICAgICAgICAgICAgIFwibWVhbmluZ3NcIjogW1xyXG4gKiAgICAgICAgICAgICAgICAgICAgIHtcclxuICogICAgICAgICAgICAgICAgICAgICAgICAgXCJtZWFuaW5nXCI6IDzlrZfnrKbkuLLvvIzljZXor43nmoTmhI/mgJ3vvIjoi7Hmlofop6Pph4rvvIk+LFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICBcImV4YW1wbGVcIjogPOWtl+espuS4su+8jOS+i+WPpT5cclxuICogICAgICAgICAgICAgICAgICAgICB9XHJcbiAqICAgICAgICAgICAgICAgICBdXHJcbiAqICAgICAgICAgICAgIH1cclxuICogICAgICAgICBdLFxyXG4gKiAgICAgICAgIFwiZXhhbXBsZXNcIjogW1xyXG4gKiAgICAgICAgICAgICA85a2X56ym5Liy77yM5Y2V6K+N55qE5L6L5Y+lPlxyXG4gKiAgICAgICAgIF0sXHJcbiAqICAgICAgICAgXCJwaHJhc2VzXCI6IFtcclxuICogICAgICAgICAgICAgPOWtl+espuS4su+8jOWNleivjeaehOaIkOeahOefreivrT5cclxuICogICAgICAgICBdXHJcbiAqICAgICB9XHJcbiAqIDwvcHJlPlxyXG4gKiBcclxuICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlIOiwt+atjOe/u+ivkei/lOWbnueahOe7k+aenOOAglxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSDmjInnhadzcGVj5Lit55qE5pWw5o2u57uT5p6E5a2Y5YKo55qE57uT5p6cXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZVRyYW5zbGF0ZShyZXNwb25zZSkge1xyXG4gICAgdmFyIHJlc3VsdCA9IG5ldyBPYmplY3QoKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAocmVzcG9uc2VbaV0pIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gcmVzcG9uc2VbaV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAoaSkge1xyXG4gICAgICAgICAgICAgICAgLy8g5Y2V6K+N55qE5Z+65pys5oSP5oCdXHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1haW5NZWFuaW5ncyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbFRleHRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbk1lYW5pbmdzLnB1c2goaXRlbVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsVGV4dHMucHVzaChpdGVtWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQubWFpbk1lYW5pbmcgPSBtYWluTWVhbmluZ3Muam9pbignJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm9yaWdpbmFsVGV4dCA9IG9yaWdpbmFsVGV4dHMuam9pbignJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0ZXh0OiBcIiArIHJlc3VsdC5vcmlnaW5hbFRleHQgKyBcIlxcbm1lYW5pbmc6IFwiICsgcmVzdWx0Lm1haW5NZWFuaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIC8vIOWNleivjeeahOaJgOacieivjeaAp+WPiuWvueW6lOeahOaEj+aAnVxyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kZXRhaWxlZE1lYW5pbmdzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kZXRhaWxlZE1lYW5pbmdzLnB1c2goeyBcInR5cGVcIjogaXRlbVswXSwgXCJtZWFuaW5nXCI6IGl0ZW1bMV0uam9pbihcIiwgXCIpIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImRldGFpbGVkTWVhbmluZ3M6IFwiICsgSlNPTi5zdHJpbmdpZnkocmVzdWx0LmRldGFpbGVkTWVhbmluZ3MpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIC8vIOWNleivjeaIluWPpeWtkOeahOW4uOingeaEj+aAne+8iOWNleivjeeahOW4uOingeaEj+aAne+8jOWPpeWtkOeahOaJgOacieWPr+iDveaEj+aAne+8iVxyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPD0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVhbmluZ0FycmF5ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zWzBdWzJdLmZvckVhY2goaXRlbSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVhbmluZ0FycmF5LnB1c2goaXRlbVswXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNvbW1vbk1lYW5pbmdzID0gbWVhbmluZ0FycmF5LmpvaW4oXCIsIFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJjb21tb25NZWFuaW5nczogXCIgKyByZXN1bHQuY29tbW9uTWVhbmluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIC8vIOWNleivjeeahOWQjOS5ieivje+8jOagueaNruivjeaAp+WIhue7hFxyXG4gICAgICAgICAgICAgICAgY2FzZSAxMTpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3lub255bXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWxlbWVudCA9IG5ldyBPYmplY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50eXBlID0gaXRlbVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC53b3JkcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtWzFdLmZvckVhY2god29yZHMgPT4gZWxlbWVudC53b3Jkcy5wdXNoKHdvcmRzWzBdLmpvaW4oXCIsIFwiKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3lub255bXMucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInN5bm9ueW1zOiBcIiArIEpTT04uc3RyaW5naWZ5KHJlc3VsdC5zeW5vbnltcykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8g5Y2V6K+N55qE5a6a5LmJ5Y+K5a+55bqU5L6L5a2QXHJcbiAgICAgICAgICAgICAgICBjYXNlIDEyOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kZWZpbml0aW9ucyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZWZpbml0aW9uID0gbmV3IE9iamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZpbml0aW9uLnR5cGUgPSBpdGVtWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZpbml0aW9uLm1lYW5pbmdzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bMV0uZm9yRWFjaChlbGVtZW50ID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbml0aW9uLm1lYW5pbmdzLnB1c2goeyBcIm1lYW5pbmdcIjogZWxlbWVudFswXSwgXCJleGFtcGxlXCI6IGVsZW1lbnRbMl0gfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlZmluaXRpb25zLnB1c2goZGVmaW5pdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJkZWZpbml0aW9uczogXCIgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQuZGVmaW5pdGlvbnMpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIC8vIOWNleivjeeahOS+i+WPpVxyXG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZXhhbXBsZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5mb3JFYWNoKGVsZW1lbnQgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5leGFtcGxlcy5wdXNoKGVsZW1lbnRbMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZXhhbXBsZXM6IFwiICsgSlNPTi5zdHJpbmdpZnkocmVzdWx0LmV4YW1wbGVzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyDljZXor43mnoTmiJDnmoTluLjop4Hnn63or61cclxuICAgICAgICAgICAgICAgIGNhc2UgMTQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnBocmFzZXMgPSBpdGVtc1swXTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInBocmFzZXM6IFwiICsgSlNPTi5zdHJpbmdpZnkocmVzdWx0LnBocmFzZXMpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICog5bGV56S657+76K+R57uT5p6c44CCXHJcbiAqIFxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGVudCDnv7vor5Hnu5PmnpzjgIJcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sg5bGV56S65a6M6aG16Z2i5ZCO5omn6KGM55qE5Zue6LCD5Ye95pWwXHJcbiAqL1xyXG5mdW5jdGlvbiBzaG93VHJhbnNsYXRlKGNvbnRlbnQsIGNhbGxiYWNrKSB7XHJcbiAgICBjaHJvbWUudGFicy5xdWVyeSh7IGFjdGl2ZTogdHJ1ZSwgY3VycmVudFdpbmRvdzogdHJ1ZSB9LCBmdW5jdGlvbiAodGFicykge1xyXG4gICAgICAgIGlmIChjaHJvbWUucnVudGltZS5sYXN0RXJyb3IpXHJcbiAgICAgICAgICAgIGFsZXJ0KGNvbnRlbnQubWFpbk1lYW5pbmcpO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjaHJvbWUudGFicy5leGVjdXRlU2NyaXB0KHRhYnNbMF0uaWQsIHtcclxuICAgICAgICAgICAgICAgIGZpbGU6ICcuL2Rpc3BsYXkvZGlzcGxheS5qcydcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHRhYikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcikgeyAvLyBjb250ZW50X3NjcmlwdOaXoOazleWcqOW9k+WJjeeql+WPo+aJp+ihjFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOi/memHjOivoumXruaYr+WQpuW8gOWQr+S6huiuv+mXriBmaWxlOi8vIOe9keWdgOeahOadg+mZkFxyXG4gICAgICAgICAgICAgICAgICAgIGNocm9tZS5leHRlbnNpb24uaXNBbGxvd2VkRmlsZVNjaGVtZUFjY2VzcyhmdW5jdGlvbiAoaXNBbGxvd2VkQWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0FsbG93ZWRBY2Nlc3MpIHsgLy8g5aaC5p6c5byA5ZCv5LqG5p2D6ZmQ77yM5YiZ5Y+q6IO96YCa6L+HYWxlcnTlsZXnpLrnu5PmnpxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGNvbnRlbnQubWFpbk1lYW5pbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyDmnKrlvIDlkK/mnYPpmZDvvIzliJnpgJrov4fov5nnp43mlrnlvI/lsZXnpLrmnYPpmZBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtKGNocm9tZS5pMThuLmdldE1lc3NhZ2UoXCJQZXJtaXNzaW9uUmVtaW5kXCIpKSkgeyAvLyDmiZPlvIDnrqHnkIbpobXpnaLvvIznlLHnlKjmiLflvIDlkK/mnYPpmZBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXJsID0gJ2Nocm9tZTovL2V4dGVuc2lvbnMvP2lkPScgKyBjaHJvbWUucnVudGltZS5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWUudGFicy5jcmVhdGUoeyAvLyDkuLrnrqHnkIbpobXpnaLliJvlu7rkuIDkuKrmlrDnmoTmoIfnrb5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0YWJzWzBdLmluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIOeUqOaIt+aLkue7neW8gOWQr++8jOWImeebtOaOpeWxleekuue/u+ivkee7k+aenFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGNvbnRlbnQubWFpbk1lYW5pbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YCa6L+H5bWM5aWX5re75Yqg5aSa5LiqY29udGVudCBzY3JpcHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFic1swXS5pZCwgY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgLy8g5b2T57+76K+R57uT5p6c5bGV56S65a6M5ZCO77yM5omn6KGM5q2k5Zue6LCD5Ye95pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcbiIsImltcG9ydCB7IHRyYW5zbGF0ZSwgc2hvd1RyYW5zbGF0ZSB9IGZyb20gJy4vdHJhbnNsYXRlLmpzJztcclxuLyoqXHJcbiAqIOm7mOiupOeahOa6kOivreiogOWSjOebruagh+ivreiogOOAglxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9MQU5HVUFHRV9TRVRUSU5HID0geyBcInNsXCI6IFwiYXV0b1wiLCBcInRsXCI6IFwiemgtQ05cIiB9O1xyXG5cclxuLyoqXHJcbiAqIOm7mOiupOeahOe/u+ivkeWPguaVsOOAglxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9EVF9TRVRUSU5HID0gW1widFwiLCBcImF0XCIsIFwiYmRcIiwgXCJleFwiLCBcIm1kXCIsIFwicndcIiwgXCJzc1wiXTtcclxuXHJcbmNvbnN0IERFRkFVTFRfT1RIRVJfU0VUVElOR1MgPSB7IFwiU2VsZWN0VHJhbnNsYXRlXCI6IHRydWUgfTtcclxuXHJcbi8qKlxyXG4gKiDliJ3lp4vljJbmj5Lku7bphY3nva7jgIJcclxuICovXHJcbmNocm9tZS5ydW50aW1lLm9uSW5zdGFsbGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uICgpIHtcclxuICAgIGNocm9tZS5jb250ZXh0TWVudXMuY3JlYXRlKHtcclxuICAgICAgICBcImlkXCI6IFwidHJhbnNsYXRlXCIsXHJcbiAgICAgICAgXCJ0aXRsZVwiOiBjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKFwiVHJhbnNsYXRlXCIpICsgXCIgJyVzJ1wiLFxyXG4gICAgICAgIFwiY29udGV4dHNcIjogW1wic2VsZWN0aW9uXCJdXHJcbiAgICB9KTtcclxuXHJcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChcImxhbmd1YWdlU2V0dGluZ1wiLCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQubGFuZ3VhZ2VTZXR0aW5nKSB7XHJcbiAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHsgXCJsYW5ndWFnZVNldHRpbmdcIjogREVGQVVMVF9MQU5HVUFHRV9TRVRUSU5HIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KFwiRFRTZXR0aW5nXCIsIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICBpZiAoIXJlc3VsdC5EVFNldHRpbmcpIHtcclxuICAgICAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoeyBcIkRUU2V0dGluZ1wiOiBERUZBVUxUX0RUX1NFVFRJTkcgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChcIk90aGVyU2V0dGluZ3NcIiwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIGlmICghcmVzdWx0Lk90aGVyU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5zZXQoeyBcIk90aGVyU2V0dGluZ3NcIjogREVGQVVMVF9PVEhFUl9TRVRUSU5HUyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNocm9tZS50YWJzLmNyZWF0ZSh7IC8vIOS4uueuoeeQhumhtemdouWIm+W7uuS4gOS4quaWsOeahOagh+etvlxyXG4gICAgICAgIHVybDogJ2h0dHBzOi8vZ2l0aHViLmNvbS9uaWNreWM5NzUvRWRnZVRyYW5zbGF0ZS93aWtpJyxcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiDmoLnmja7nlKjmiLfnmoTor63oqIDorr7lrprlm73pmYXljJblj7PplK7oj5zljZXkuK3nmoQg4oCc57+76K+RICd4eHgn4oCdIOmAiemhuVxyXG4gKi9cclxuY2hyb21lLnJ1bnRpbWUub25TdGFydHVwLmFkZExpc3RlbmVyKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIOS4jeefpeS4uuS9leaJvuS4jeWIsCB0cmFuc2xhdGUg6L+Z5LiqIG1lbnUgaXRlbe+8jOWvvOiHtCB1cGRhdGUg5LiN6IO955So44CCXHJcbiAgICAvLyBjaHJvbWUuY29udGV4dE1lbnVzLnVwZGF0ZShcInRyYW5zbGF0ZVwiLCB7XCJ0aXRsZVwiOiBjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKFwiVHJhbnNsYXRlXCIpICsgXCIgJyVzJ1wifSk7XHJcblxyXG4gICAgY2hyb21lLmNvbnRleHRNZW51cy5yZW1vdmVBbGwoKTtcclxuICAgIGNocm9tZS5jb250ZXh0TWVudXMuY3JlYXRlKHtcclxuICAgICAgICBcImlkXCI6IFwidHJhbnNsYXRlXCIsXHJcbiAgICAgICAgXCJ0aXRsZVwiOiBjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKFwiVHJhbnNsYXRlXCIpICsgXCIgJyVzJ1wiLFxyXG4gICAgICAgIFwiY29udGV4dHNcIjogW1wic2VsZWN0aW9uXCJdXHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vKipcclxuICog5re75Yqg54K55Ye76I+c5Y2V5ZCO55qE5aSE55CG5LqL5Lu2XHJcbiAqL1xyXG5jaHJvbWUuY29udGV4dE1lbnVzLm9uQ2xpY2tlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoaW5mbywgdGFicykge1xyXG4gICAgdmFyIHRleHQgPSBpbmZvLnNlbGVjdGlvblRleHQ7XHJcbiAgICB0cmFuc2xhdGUodGV4dCwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIHNob3dUcmFuc2xhdGUocmVzdWx0KTtcclxuICAgIH0pOyAvLyDmraRhcGnkvY3kuo4gdHJhbnNsYXRlLmpz5LitXHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9